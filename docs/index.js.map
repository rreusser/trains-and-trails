{"version":3,"file":"index.js","sources":["../node_modules/preact/dist/preact.module.js","../node_modules/htm/dist/htm.module.js","../node_modules/htm/preact/index.module.js","../node_modules/preact/hooks/dist/hooks.module.js","../src/data/map.js","../src/data/map-context.js","../src/components/map.js","../src/components/article.js","../src/components/overlay.js","../src/components/app.js","../src/index.js"],"sourcesContent":["var n,l,u,i,t,o,r,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function h(n){var l=n.parentNode;l&&l.removeChild(n)}function v(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return y(l,f,t,o,null)}function y(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function p(){return{current:null}}function d(n){return n.children}function _(n,l){this.props=n,this.context=l}function k(n,l){if(null==l)return n.__?k(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?k(n):null}function b(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return b(n)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||r!==l.debounceRendering)&&((r=l.debounceRendering)||o)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=a({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?k(t):o,t.__h),z(u,t),t.__e!=o&&b(t)))})}function w(n,l,u,i,t,o,r,f,s,a){var h,v,p,_,b,m,g,w=i&&i.__k||c,A=w.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(_=u.__k[h]=null==(_=l[h])||\"boolean\"==typeof _?null:\"string\"==typeof _||\"number\"==typeof _||\"bigint\"==typeof _?y(null,_,null,null,_):Array.isArray(_)?y(d,{children:_},null,null,null):_.__b>0?y(_.type,_.props,_.key,null,_.__v):_)){if(_.__=u,_.__b=u.__b+1,null===(p=w[h])||p&&_.key==p.key&&_.type===p.type)w[h]=void 0;else for(v=0;v<A;v++){if((p=w[v])&&_.key==p.key&&_.type===p.type){w[v]=void 0;break}p=null}j(n,_,p=p||e,t,o,r,f,s,a),b=_.__e,(v=_.ref)&&p.ref!=v&&(g||(g=[]),p.ref&&g.push(p.ref,null,_),g.push(v,_.__c||b,_)),null!=b?(null==m&&(m=b),\"function\"==typeof _.type&&_.__k===p.__k?_.__d=s=x(_,s,n):s=P(n,_,p,w,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&p.__e==s&&s.parentNode!=n&&(s=k(p))}for(u.__e=m,h=A;h--;)null!=w[h]&&(\"function\"==typeof u.type&&null!=w[h].__e&&w[h].__e==u.__d&&(u.__d=k(i,h+1)),N(w[h],w[h]));if(g)for(h=0;h<g.length;h++)M(g[h],g[++h],g[++h])}function x(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?x(i,l,u):P(u,i,i,t,i.__e,l));return l}function A(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){A(n,l)}):l.push(n)),l}function P(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||s.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var s,h,v,y,p,k,b,m,g,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(s=l.__b)&&s(u);try{n:if(\"function\"==typeof P){if(m=u.props,g=(s=P.contextType)&&t[s.__c],x=s?g?g.props.value:s.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in P&&P.prototype.render?u.__c=h=new P(m,x):(u.__c=h=new _(m,x),h.constructor=P,h.render=O),g&&g.sub(h),h.props=m,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=P.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=a({},h.__s)),a(h.__s,P.getDerivedStateFromProps(m,h.__s))),y=h.props,p=h.state,v)null==P.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,x)||u.__v===i.__v){h.props=m,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,p,k)})}h.context=x,h.props=m,h.state=h.__s,(s=l.__r)&&s(u),h.__d=!1,h.__v=u,h.__P=n,s=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(t=a(a({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,p)),A=null!=s&&s.type===d&&null==s.key?s.props.children:s,w(n,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(s=l.diffed)&&s(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,f,c){var s,a,v,y=i.props,p=u.props,d=u.type,_=0;if(\"svg\"===d&&(o=!0),null!=r)for(;_<r.length;_++)if((s=r[_])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[_]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),a=(y=i.props||e).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},_=0;_<l.attributes.length;_++)y[l.attributes[_].name]=l.attributes[_].value;(v||a)&&(v&&(a&&v.__html==a.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(_=u.props.children,w(l,Array.isArray(_)?_:[_],u,i,t,o&&\"foreignObject\"!==d,r,f,r?r[0]:i.__k&&k(i,0),c),null!=r)for(_=r.length;_--;)null!=r[_]&&h(r[_]);c||(\"value\"in p&&void 0!==(_=p.value)&&(_!==l.value||\"progress\"===d&&!_||\"option\"===d&&_!==y.value)&&H(l,\"value\",_,y.value,!1),\"checked\"in p&&void 0!==(_=p.checked)&&_!==l.checked&&H(l,\"checked\",_,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,\"function\"!=typeof n.type);i||null==n.__e||h(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function S(u,i,t){var o,r,f;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,f=[],j(i,u=(!o&&t||i).__k=v(d,null,[u]),r||e,e,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,f,!o&&t?t:r?r.__e:i.firstChild,o),z(f,u)}function q(n,l){S(n,l,q)}function B(l,u,i){var t,o,r,f=a({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),y(l.type,f,t||l.key,o||l.ref,null)}function D(n,l){var u={__c:l=\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(m)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=c.slice,l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},_.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(a({},u),this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),m(this))},_.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),m(this))},_.prototype.render=d,t=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,f=0;export{S as render,q as hydrate,v as createElement,v as h,d as Fragment,p as createRef,i as isValidElement,_ as Component,B as cloneElement,D as createContext,A as toChildArray,l as options};\n//# sourceMappingURL=preact.module.js.map\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","import{h as r,Component as o,render as t}from\"preact\";export{h,render,Component}from\"preact\";import e from\"htm\";var m=e.bind(r);export{m as html};\n","import{options as n}from\"preact\";var t,u,r,o=0,i=[],c=n.__b,f=n.__r,e=n.diffed,a=n.__c,v=n.unmount;function l(t,r){n.__h&&n.__h(u,t,o||r),o=0;var i=u.__H||(u.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function m(n){return o=1,p(w,n)}function p(n,r,o){var i=l(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):w(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function y(r,o){var i=l(t++,3);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__H.__h.push(i))}function d(r,o){var i=l(t++,4);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__h.push(i))}function h(n){return o=5,_(function(){return{current:n}},[])}function s(n,t,u){o=6,d(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==u?u:u.concat(n))}function _(n,u){var r=l(t++,7);return k(r.__H,u)&&(r.__=n(),r.__H=u,r.__h=n),r.__}function A(n,t){return o=8,_(function(){return n},t)}function F(n){var r=u.context[n.__c],o=l(t++,9);return o.c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function T(t,u){n.useDebugValue&&n.useDebugValue(u?u(t):t)}function q(n){var r=l(t++,10),o=m();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function x(){for(var t;t=i.shift();)if(t.__P)try{t.__H.__h.forEach(g),t.__H.__h.forEach(j),t.__H.__h=[]}catch(u){t.__H.__h=[],n.__e(u,t.__v)}}n.__b=function(n){u=null,c&&c(n)},n.__r=function(n){f&&f(n),t=0;var r=(u=n.__c).__H;r&&(r.__h.forEach(g),r.__h.forEach(j),r.__h=[])},n.diffed=function(t){e&&e(t);var o=t.__c;o&&o.__H&&o.__H.__h.length&&(1!==i.push(o)&&r===n.requestAnimationFrame||((r=n.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),b&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);b&&(t=requestAnimationFrame(u))})(x)),u=null},n.__c=function(t,u){u.some(function(t){try{t.__h.forEach(g),t.__h=t.__h.filter(function(n){return!n.__||j(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],n.__e(r,t.__v)}}),a&&a(t,u)},n.unmount=function(t){v&&v(t);var u,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{g(n)}catch(n){u=n}}),u&&n.__e(u,r.__v))};var b=\"function\"==typeof requestAnimationFrame;function g(n){var t=u,r=n.__c;\"function\"==typeof r&&(n.__c=void 0,r()),u=t}function j(n){var t=u;n.__c=n.__(),u=t}function k(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function w(n,t){return\"function\"==typeof t?t(n):t}export{m as useState,p as useReducer,y as useEffect,d as useLayoutEffect,h as useRef,s as useImperativeHandle,_ as useMemo,A as useCallback,F as useContext,T as useDebugValue,q as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","import bbox from '@turf/bbox';\n\nif (typeof window !== \"undefined\" && typeof window.mapboxgl !== \"undefined\") {\n  mapboxgl.accessToken = process.env.MAPBOX_ACCESS_TOKEN;\n}\n\nconst NO_HIDE_LAYERS = ['background', 'satellite', 'sf-bart', 'sf-muni'];\nconst FADE_LAYERS = ['sf-bart', 'sf-muni'];\n\nconst EMPTY_GEOJSON = {\n  \"type\": \"FeatureCollection\",\n  \"features\": []\n};\n\nfunction currentPadding () {\n  return window.innerWidth < 1200 ? {\n    bottom: window.innerHeight * 0.45,\n    left: window.innerWidth * 0.1,\n    right: window.innerWidth * 0.1,\n    top: 50,\n  } : {\n    left: window.innerWidth * 0.1,\n    right: window.innerWidth * 0.1,\n    top: window.innerHeight * 0.1,\n    bottom: window.innerHeight * 0.1,\n  };\n}\n\nclass MbxMap {\n  constructor () {\n    this._onload = [];\n  }\n\n  initialize (element, bounds) {\n    this.map = window.map = new mapboxgl.Map({\n      container: element,\n      style: 'mapbox://styles/rreusser/cl3jof9o3000g14le3tzu1ih9',\n      scrollZoom: false,\n      boxZoom: false,\n      dragRotate: false,\n      dragPan: false,\n      keyboard: false,\n      doubleClickZoom: false,\n      touchZoomRotate: false,\n      interactive: false,\n      bounds,\n      fitBoundsOptions: { padding: currentPadding() },\n      showPadding: true,\n    });\n\n    this.map.on('load', () => {\n      this.map.addSource('route', {\n        type: 'geojson',\n        data: EMPTY_GEOJSON,\n      });\n\n      this.map.addLayer({\n        id: 'routeline',\n        source: 'route',\n        type: 'line',\n        paint: {\n          'line-color': '#3388ff',\n          'line-width': 4\n        }\n      });\n      while (this._onload.length) {\n        this._onload.pop()(this.map)\n      }\n      this.loaded = true;\n    });\n  }\n\n  ready () {\n    if (this.loaded) return Promise.resolve(this.map);\n    return new Promise(resolve => {\n      this._onload.push(resolve);\n    });\n  }\n\n  clearRoute (bounds) {\n    if (bounds) this.map.fitBounds(bounds, {\n      padding: currentPadding()\n    });\n    this.map.getSource('route').setData(EMPTY_GEOJSON);\n\n    for (const layer of Object.keys(this.map.style._layers)) {\n      if (~NO_HIDE_LAYERS.indexOf(layer)) continue;\n      map.setLayoutProperty(layer, 'visibility', 'none');\n    }\n\n    for (const layer of FADE_LAYERS) {\n      map.setPaintProperty(layer, 'line-opacity', 1.0);\n    }\n  }\n\n  setRoute (geojson, bounds, immediate, usePadding) {\n    for (const layer of Object.keys(this.map.style._layers)) {\n      if (~NO_HIDE_LAYERS.indexOf(layer)) continue;\n      map.setLayoutProperty(layer, 'visibility', 'visible');\n    }\n\n    this.map.getSource('route').setData(geojson);\n    this.map.fitBounds(bounds, {\n      padding: currentPadding()\n    });\n\n    for (const layer of FADE_LAYERS) {\n      map.setPaintProperty(layer, 'line-opacity', 0.2);\n    }\n  }\n}\n\nexport default MbxMap;\n","import { createContext } from 'preact';\nimport MbxMap from './map.js';\n\nexport default createContext(new MbxMap());\n","import { html } from 'htm/preact';\nimport { useRef, useState, useEffect, useContext } from 'preact/hooks';\nimport mapContext from '../data/map-context.js';\n\nexport default function MapView (props) {\n  const map = useContext(mapContext);\n  const mapEl = useRef(null);\n\n  useEffect(() => {\n    map.initialize(mapEl.current, props.initialBounds, !props.isHome);\n  }, []);\n\n  return html`<div ref=${mapEl} class=\"mbxmap\"/>`\n}\n","import { html } from 'htm/preact';\nimport { useRef, useEffect, useContext } from 'preact/hooks';\nimport mapContext from '../data/map-context.js';\n\n\nconst EXTERNAL_URL_REGEX = /^http/;\nlet initialLoad = true;\n\nfunction Article ({page, setPath}) {\n  const contentContainer = useRef(null);\n  const map = useContext(mapContext);\n\n  const isHome = page.metadata.path === '/';\n  const isFront = page.metadata.isFront;\n\n  useEffect(async () => {\n    await map.ready();\n\n    const routePath = page.metadata.assets?.route;\n    if (routePath) {\n      fetch(routePath)\n        .then(response => {\n          if (!response.ok) throw new Error('404');\n          return response.json();\n        })\n        .then(data => {\n          map.setRoute(data, page.metadata.bounds, initialLoad);\n        });\n    } else {\n      map.clearRoute(initialLoad ? null : page.metadata.bounds);\n    }\n\n    initialLoad = false;\n\n    window.scrollTo(0,0);\n  }, []);\n\n\n  function navigate (event) {\n    if (event.target.tagName !== 'A') return;\n    let href = event.target.getAttribute('href')\n    if (EXTERNAL_URL_REGEX.test(href)) return;\n\n    if (!href.endsWith('/')) href += '/';\n    event.stopPropagation();\n    event.preventDefault();\n\n    setPath(href);\n  }\n\n  useEffect(() => {\n    if (!contentContainer.current) return;\n    contentContainer.current.addEventListener('click', navigate);\n    return () => contentContainer.current.removeEventListener('click', navigate);\n  });\n\n  return html`\n    <div class=\"article_container ${isFront ? 'is-front' : ''}\">\n      <div class=\"article_header\">\n        ${isHome ? '' : html`<a href=\"/\" onClick=${event => navigate(event, '/')}>← Back</a>`}\n        <h1>${page.metadata.title}</h1>\n        <div class=\"article_date\">${page.metadata.date}</div>\n      </div>\n      <div class=\"article_body\" ref=${contentContainer} dangerouslySetInnerHTML=${{__html: page.articleHTML}}/>\n    </div>`;\n}\n\nexport default Article;\n","import { html } from 'htm/preact';\nimport { useState, useEffect } from 'preact/hooks';\n\nfunction Overlay ({active}) {\n  return html`<div\n    className=\"overlay ${active ? 'overlay-isActive' : ''}\"\n  />`;\n}\n\nexport default Overlay;\n","import MbxMap from './map.js';\nimport { html } from 'htm/preact';\nimport Article from './article.js';\nimport Overlay from './overlay.js';\nimport { useState, useEffect } from 'preact/hooks';\nimport mapContext from '../data/map-context.js';\n\nconst pageCache = new Map();\nfunction getPage (path) {\n  if (pageCache.has(path)) return Promise.resolve(pageCache.get(path));\n  return fetch(path)\n    .then(response => {\n      if (!response.ok) throw new Error('404d!');\n      return response.json();\n    })\n    .then(page => {\n      pageCache.set(path, page);\n      return page;\n    });\n}\n\nfunction App (props) {\n  const [path, setPath] = useState(props.page.metadata.path);\n  const [page, setPage] = useState(props.page);\n  const [fetching, setFetching] = useState(false);\n\n  useEffect(() => {\n    history.pushState({page, path}, '', path);\n    function onChange (event) {\n      setPath(event.state.path);\n      setPage(event.state.page);\n    }\n    window.addEventListener('popstate', onChange);\n  }, []);\n\n  useEffect(() => {\n    if (path === page.metadata.path) return;\n    if (fetching) return;\n\n    const pagePath = `${path}/index.json`.replace(/\\/\\//g, '/');\n    setFetching(true);\n    history.pushState({path: pagePath, page: null}, '', path);\n    getPage(pagePath)\n      .then(page => {\n        setPage(page);\n        history.replaceState({path, page}, '', path);\n      })\n      .then(\n        () => setFetching(false),\n        () => setFetching(false)\n      );\n  });\n\n  return html`\n    <${MbxMap} initialBounds=${page.metadata.bounds} isHome=${page.metadata.path === '/'}/>\n    <${Article} key=${page.metadata.path} page=${page} setPath=${setPath}/>\n    <${Overlay} active=${fetching}/>\n  `\n}\n\nexport default App;\n","import App from './components/app.js';\nimport { render, h } from 'preact';\n\nrender(\n  h(App, {page: window.page}),\n  document.getElementById('root')\n);\n"],"names":["EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","n","t","s","r","e","u","h","length","p","a","Object","assign","apply","push","Map","currentIndex","currentComponent","prevRaf","m","get","this","set","replace","l","arguments","bind","currentHook","afterPaintEffects","oldBeforeDiff","options","__b","oldBeforeRender","__r","oldAfterDiff","diffed","oldCommit","__c","oldBeforeUnmount","unmount","getHookState","index","type","hooks","__H","__","__h","useState","initialState","reducer","init","hookState","_reducer","invokeOrReturn","action","nextValue","setState","useReducer","useEffect","callback","args","state","argsChanged","useRef","initialValue","factory","useMemo","current","useContext","context","provider","sub","props","value","flushAfterPaintEffects","component","shift","forEach","invokeCleanup","invokeEffect","vnode","c","requestAnimationFrame","raf","done","clearTimeout","timeout","HAS_RAF","cancelAnimationFrame","setTimeout","commitQueue","some","filter","cb","hasErrored","hook","comp","cleanup","undefined","oldArgs","newArgs","arg","f","window","mapboxgl","accessToken","pk","eyJ1IjoicnJldXNzZXIiLCJhIjoiY2wza2hzZGZmMDA1cTNicGFiaXJveWw4eCJ9","jC8S7UHhN6cEjyyLTxjsSA","NO_HIDE_LAYERS","FADE_LAYERS","EMPTY_GEOJSON","features","currentPadding","innerWidth","bottom","innerHeight","left","right","top","mapContext","createContext","MbxMap","_classCallCheck","_onload","element","bounds","_this","map","container","style","scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","interactive","fitBoundsOptions","padding","showPadding","on","addSource","data","addLayer","id","source","paint","pop","loaded","_this2","Promise","resolve","fitBounds","getSource","setData","keys","_layers","_i","_Object$keys","layer","indexOf","setLayoutProperty","_step","_iterator","_createForOfIteratorHelper","setPaintProperty","err","geojson","immediate","usePadding","_i2","_Object$keys2","_step2","_iterator2","MapView","mapEl","initialize","initialBounds","isHome","html","EXTERNAL_URL_REGEX","initialLoad","Article","_ref","page","setPath","contentContainer","metadata","path","isFront","navigate","event","target","tagName","href","getAttribute","test","endsWith","stopPropagation","preventDefault","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_page$metadata$assets","routePath","wrap","_context","prev","next","ready","assets","route","fetch","then","response","ok","Error","json","setRoute","clearRoute","scrollTo","stop","addEventListener","removeEventListener","_templateObject","_taggedTemplateLiteral","_templateObject2","title","date","__html","articleHTML","Overlay","active","pageCache","render","_useState2","_slicedToArray","_useState4","setPage","_useState6","fetching","setFetching","history","pushState","pagePath","concat","has","getPage","replaceState","document","getElementById"],"mappings":"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"}