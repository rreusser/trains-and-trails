!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var _={};l(_,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(M([])));v&&v!==e&&r.call(v,o)&&(_=v);var g=p.prototype=f.prototype=Object.create(_);function y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function M(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,l(g,"constructor",p),l(p,"constructor",d),d.displayName=l(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(b.prototype),l(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),l(g,s,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function s(t){i(a,r,o,s,l,"next",t)}function l(t){i(a,r,o,s,l,"throw",t)}s(void 0)}))}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=d(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var m,v,g,y,b,w,k,x={},P=[],M=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function T(t,e){for(var n in e)t[n]=e[n];return t}function E(t){var e=t.parentNode;e&&e.removeChild(t)}function L(t,e,n){var r,i,o,a={};for(o in e)"key"==o?r=e[o]:"ref"==o?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?m.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===a[o]&&(a[o]=t.defaultProps[o]);return S(t,a,r,i,null)}function S(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++g:i};return null==i&&null!=v.vnode&&v.vnode(o),o}function C(t){return t.children}function j(t,e){this.props=t,this.context=e}function A(t,e){if(null==e)return t.__?A(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?A(t):null}function O(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return O(t)}}function F(t){(!t.__d&&(t.__d=!0)&&y.push(t)&&!I.__r++||w!==v.debounceRendering)&&((w=v.debounceRendering)||b)(I)}function I(){for(var t;I.__r=y.length;)t=y.sort((function(t,e){return t.__v.__b-e.__v.__b})),y=[],t.some((function(t){var e,n,r,i,o,a;t.__d&&(o=(i=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=T({},i)).__v=i.__v+1,R(a,i,r,e.__n,void 0!==a.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?A(i):o,i.__h),W(n,i),i.__e!=o&&O(i)))}))}function z(t,e,n,r,i,o,a,s,l,u){var c,h,f,d,p,_,m,v=r&&r.__k||P,g=v.length;for(n.__k=[],c=0;c<e.length;c++)if(null!=(d=n.__k[c]=null==(d=e[c])||"boolean"==typeof d?null:"string"==typeof d||"number"==typeof d||"bigint"==typeof d?S(null,d,null,null,d):Array.isArray(d)?S(C,{children:d},null,null,null):d.__b>0?S(d.type,d.props,d.key,null,d.__v):d)){if(d.__=n,d.__b=n.__b+1,null===(f=v[c])||f&&d.key==f.key&&d.type===f.type)v[c]=void 0;else for(h=0;h<g;h++){if((f=v[h])&&d.key==f.key&&d.type===f.type){v[h]=void 0;break}f=null}R(t,d,f=f||x,i,o,a,s,l,u),p=d.__e,(h=d.ref)&&f.ref!=h&&(m||(m=[]),f.ref&&m.push(f.ref,null,d),m.push(h,d.__c||p,d)),null!=p?(null==_&&(_=p),"function"==typeof d.type&&d.__k===f.__k?d.__d=l=N(d,l,t):l=G(t,d,f,v,p,l),"function"==typeof n.type&&(n.__d=l)):l&&f.__e==l&&l.parentNode!=t&&(l=A(f))}for(n.__e=_,c=g;c--;)null!=v[c]&&("function"==typeof n.type&&null!=v[c].__e&&v[c].__e==n.__d&&(n.__d=A(r,c+1)),K(v[c],v[c]));if(m)for(c=0;c<m.length;c++)B(m[c],m[++c],m[++c])}function N(t,e,n){for(var r,i=t.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=t,e="function"==typeof r.type?N(r,e,n):G(n,r,r,i,r.__e,e));return e}function G(t,e,n,r,i,o){var a,s,l;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==n||i!=o||null==i.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(i),a=null;else{for(s=o,l=0;(s=s.nextSibling)&&l<r.length;l+=2)if(s==i)break t;t.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function D(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||M.test(e)?n:n+"px"}function H(t,e,n,r,i){var o;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||D(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||D(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r||t.addEventListener(e,o?q:U,o):t.removeEventListener(e,o?q:U,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function U(t){this.l[t.type+!1](v.event?v.event(t):t)}function q(t){this.l[t.type+!0](v.event?v.event(t):t)}function R(t,e,n,r,i,o,a,s,l){var u,c,h,f,d,p,_,g,y,b,w,k=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(l=n.__h,s=e.__e=n.__e,e.__h=null,o=[s]),(u=v.__b)&&u(e);try{t:if("function"==typeof k){if(g=e.props,y=(u=k.contextType)&&r[u.__c],b=u?y?y.props.value:u.__:r,n.__c?_=(c=e.__c=n.__c).__=c.__E:("prototype"in k&&k.prototype.render?e.__c=c=new k(g,b):(e.__c=c=new j(g,b),c.constructor=k,c.render=V),y&&y.sub(c),c.props=g,c.state||(c.state={}),c.context=b,c.__n=r,h=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=k.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=T({},c.__s)),T(c.__s,k.getDerivedStateFromProps(g,c.__s))),f=c.props,d=c.state,h)null==k.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==k.getDerivedStateFromProps&&g!==f&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(g,b),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(g,c.__s,b)||e.__v===n.__v){c.props=g,c.state=c.__s,e.__v!==n.__v&&(c.__d=!1),c.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),c.__h.length&&a.push(c);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(g,c.__s,b),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(f,d,p)}))}c.context=b,c.props=g,c.state=c.__s,(u=v.__r)&&u(e),c.__d=!1,c.__v=e,c.__P=t,u=c.render(c.props,c.state,c.context),c.state=c.__s,null!=c.getChildContext&&(r=T(T({},r),c.getChildContext())),h||null==c.getSnapshotBeforeUpdate||(p=c.getSnapshotBeforeUpdate(f,d)),w=null!=u&&u.type===C&&null==u.key?u.props.children:u,z(t,Array.isArray(w)?w:[w],e,n,r,i,o,a,s,l),c.base=e.__e,e.__h=null,c.__h.length&&a.push(c),_&&(c.__E=c.__=null),c.__e=!1}else null==o&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(t,e,n,r,i,o,a,s){var l,u,c,h=n.props,f=e.props,d=e.type,p=0;if("svg"===d&&(i=!0),null!=o)for(;p<o.length;p++)if((l=o[p])&&"setAttribute"in l==!!d&&(d?l.localName===d:3===l.nodeType)){t=l,o[p]=null;break}if(null==t){if(null===d)return document.createTextNode(f);t=i?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,f.is&&f),o=null,s=!1}if(null===d)h===f||s&&t.data===f||(t.data=f);else{if(o=o&&m.call(t.childNodes),u=(h=n.props||x).dangerouslySetInnerHTML,c=f.dangerouslySetInnerHTML,!s){if(null!=o)for(h={},p=0;p<t.attributes.length;p++)h[t.attributes[p].name]=t.attributes[p].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===t.innerHTML)||(t.innerHTML=c&&c.__html||""))}if(function(t,e,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in e||H(t,o,null,n[o],r);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===e[o]||H(t,o,e[o],n[o],r)}(t,f,h,i,s),c)e.__k=[];else if(p=e.props.children,z(t,Array.isArray(p)?p:[p],e,n,r,i&&"foreignObject"!==d,o,a,o?o[0]:n.__k&&A(n,0),s),null!=o)for(p=o.length;p--;)null!=o[p]&&E(o[p]);s||("value"in f&&void 0!==(p=f.value)&&(p!==t.value||"progress"===d&&!p||"option"===d&&p!==h.value)&&H(t,"value",p,h.value,!1),"checked"in f&&void 0!==(p=f.checked)&&p!==t.checked&&H(t,"checked",p,h.checked,!1))}return t}(n.__e,e,n,r,i,o,a,l);(u=v.diffed)&&u(e)}catch(t){e.__v=null,(l||null!=o)&&(e.__e=s,e.__h=!!l,o[o.indexOf(s)]=null),v.__e(t,e,n)}}function W(t,e){v.__c&&v.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){v.__e(t,e.__v)}}))}function B(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){v.__e(t,n)}}function K(t,e,n){var r,i;if(v.unmount&&v.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||B(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){v.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&K(r[i],e,"function"!=typeof t.type);n||null==t.__e||E(t.__e),t.__e=t.__d=void 0}function V(t,e,n){return this.constructor(t,n)}m=P.slice,v={__e:function(t,e,n,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(t)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(e){t=e}throw t}},g=0,j.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=T({},this.state),"function"==typeof t&&(t=t(T({},n),this.props)),t&&T(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),F(this))},j.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),F(this))},j.prototype.render=C,y=[],b="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,I.__r=0,k=0;var Z=function t(e,n,r,i){var o;n[0]=0;for(var a=1;a<n.length;a++){var s=n[a++],l=n[a]?(n[0]|=s?1:2,r[n[a++]]):n[++a];3===s?i[0]=l:4===s?i[1]=Object.assign(i[1]||{},l):5===s?(i[1]=i[1]||{})[n[++a]]=l:6===s?i[1][n[++a]]+=l+"":s?(o=e.apply(l,t(e,l,r,["",null])),i.push(o),l[0]?n[0]|=2:(n[a-2]=0,n[a]=o)):i.push(l)}return i},$=new Map;var J,Q,Y,X=function(t){var e=$.get(this);return e||(e=new Map,$.set(this,e)),(e=Z(this,e.get(t)||(e.set(t,e=function(t){for(var e,n,r=1,i="",o="",a=[0],s=function(t){1===r&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,t,i):3===r&&(t||i)?(a.push(3,t,i),r=2):2===r&&"..."===i&&t?a.push(4,t,0):2===r&&i&&!t?a.push(5,0,!0,i):r>=5&&((i||!t&&5===r)&&(a.push(r,0,i,n),r=6),t&&(a.push(r,t,0,n),r=6)),i=""},l=0;l<t.length;l++){l&&(1===r&&s(),s(l));for(var u=0;u<t[l].length;u++)e=t[l][u],1===r?"<"===e?(s(),a=[a],r=3):i+=e:4===r?"--"===i&&">"===e?(r=1,i=""):i=e+i[0]:o?e===o?o="":i+=e:'"'===e||"'"===e?o=e:">"===e?(s(),r=1):r&&("="===e?(r=5,n=i,i=""):"/"===e&&(r<5||">"===t[l][u+1])?(s(),3===r&&(a=a[0]),r=a,(a=a[0]).push(2,0,r),r=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(s(),r=2):i+=e),3===r&&"!--"===i&&(r=4,a=a[0])}return s(),a}(t)),e),arguments,[])).length>1?e:e[0]}.bind(L),tt=0,et=[],nt=v.__b,rt=v.__r,it=v.diffed,ot=v.__c,at=v.unmount;function st(t,e){v.__h&&v.__h(Q,t,tt||e),tt=0;var n=Q.__H||(Q.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function lt(t){return tt=1,function(t,e,n){var r=st(J++,2);return r.t=t,r.__c||(r.__=[n?n(e):vt(void 0,e),function(t){var e=r.t(r.__[0],t);r.__[0]!==e&&(r.__=[e,r.__[1]],r.__c.setState({}))}],r.__c=Q),r.__}(vt,t)}function ut(t,e){var n=st(J++,3);!v.__s&&mt(n.__H,e)&&(n.__=t,n.__H=e,Q.__H.__h.push(n))}function ct(t){return tt=5,function(t,e){var n=st(J++,7);return mt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}((function(){return{current:t}}),[])}function ht(t){var e=Q.context[t.__c],n=st(J++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(Q)),e.props.value):t.__}function ft(){for(var t;t=et.shift();)if(t.__P)try{t.__H.__h.forEach(pt),t.__H.__h.forEach(_t),t.__H.__h=[]}catch(e){t.__H.__h=[],v.__e(e,t.__v)}}v.__b=function(t){Q=null,nt&&nt(t)},v.__r=function(t){rt&&rt(t),J=0;var e=(Q=t.__c).__H;e&&(e.__h.forEach(pt),e.__h.forEach(_t),e.__h=[])},v.diffed=function(t){it&&it(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==et.push(e)&&Y===v.requestAnimationFrame||((Y=v.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),dt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);dt&&(e=requestAnimationFrame(n))})(ft)),Q=null},v.__c=function(t,e){e.some((function(t){try{t.__h.forEach(pt),t.__h=t.__h.filter((function(t){return!t.__||_t(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],v.__e(n,t.__v)}})),ot&&ot(t,e)},v.unmount=function(t){at&&at(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{pt(t)}catch(t){e=t}})),e&&v.__e(e,n.__v))};var dt="function"==typeof requestAnimationFrame;function pt(t){var e=Q,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),Q=e}function _t(t){var e=Q;t.__c=t.__(),Q=e}function mt(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function vt(t,e){return"function"==typeof e?e(t):e}var gt=6371008.8,yt={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*gt,kilometers:6371.0088,kilometres:6371.0088,meters:gt,metres:gt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:gt/1852,radians:1,yards:6967335.223679999};function bt(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function wt(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(t[0])||!Tt(t[1]))throw new Error("coordinates must contain numbers");return bt({type:"Point",coordinates:t},e,n)}function kt(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return bt({type:"LineString",coordinates:t},e,n)}function xt(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Pt(t){return 180*(t%(2*Math.PI))/Math.PI}function Mt(t){return t%360*Math.PI/180}function Tt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Et(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,f=0,d=t.type,p="FeatureCollection"===d,_="Feature"===d,m=p?t.features.length:1,v=0;v<m;v++){s=(c=!!(u=p?t.features[v].geometry:_?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var g=0;g<s;g++){var y=0,b=0;if(null!==(a=c?u.geometries[g]:u)){l=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,f,v,y,b))return!1;f++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],f,v,y,b))return!1;f++,"MultiPoint"===w&&y++}"LineString"===w&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],f,v,y,b))return!1;f++}"MultiLineString"===w&&y++,"Polygon"===w&&b++}"Polygon"===w&&y++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],f,v,y,b))return!1;f++}b++}y++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===Et(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Lt(t,e){var n,r,i,o,a,s,l,u,c,h,f=0,d="FeatureCollection"===t.type,p="Feature"===t.type,_=d?t.features.length:1;for(n=0;n<_;n++){for(s=d?t.features[n].geometry:p?t.geometry:t,u=d?t.features[n].properties:p?t.properties:{},c=d?t.features[n].bbox:p?t.bbox:void 0,h=d?t.features[n].id:p?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,c,h))return!1;f++}}function St(t,e){!function(t,e){Lt(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(bt(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(bt({type:a,coordinates:u},r),n,l))return!1}}))}(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==Et(t,(function(o,c,h,f,d){if(void 0===a||n>s||f>l||d>u)return a=o,s=n,l=f,u=d,void(i=0);var p=kt([a,o],t.properties);if(!1===e(p,n,r,d,i))return!1;i++,a=o}))&&void 0}}}))}function Ct(t){var e=[1/0,1/0,-1/0,-1/0];return Et(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function jt(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function At(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ot(t,e,n){void 0===n&&(n={});var r=jt(t),i=jt(e),o=Mt(i[1]-r[1]),a=Mt(i[0]-r[0]),s=Mt(r[1]),l=Mt(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return function(t,e){void 0===e&&(e="kilometers");var n=yt[e];if(!n)throw new Error(e+" units is invalid");return t*n}(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}function Ft(t,e){return void 0===e&&(e={}),function(t,e,n){var r=n,i=!1;return St(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}(t,(function(t,n){var r=n.geometry.coordinates;return t+Ot(r[0],r[1],e)}),0)}function It(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=It(e,t);return n=(n+180)%360}(t,e);var r=jt(t),i=jt(e),o=Mt(r[0]),a=Mt(i[0]),s=Mt(r[1]),l=Mt(i[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return Pt(Math.atan2(u,c))}function zt(t,e,n,r){void 0===r&&(r={});var i=jt(t),o=Mt(i[0]),a=Mt(i[1]),s=Mt(n),l=function(t,e){void 0===e&&(e="kilometers");var n=yt[e];if(!n)throw new Error(e+" units is invalid");return t/n}(e,r.units),u=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return wt([Pt(o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(u))),Pt(u)],r.properties)}Ct.default=Ct;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Nt={exports:{}};Nt.exports=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=i;function i(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}var o=a;function a(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}var s=l;function l(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}var u=c;function c(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}var h=f;function f(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}var d=p;function p(t,e){return t[0]*e[0]+t[1]*e[1]}var _=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.distance,o=void 0===i?1e4:i,a=r.pitch,s=void 0===a?45:a,l=r.bearing,u=void 0===l?0:l;t(this,e),this.map=n,this.MercatorCoordinate=this.map.getFreeCameraOptions().position.constructor,this._distanceTarget=o,this._pitchTarget=s,this._bearingTarget=u,this._centerTarget=this.center=this.MercatorCoordinate.fromLngLat(n.transform.center),this._centerTarget=null,this._center=this._previousCenter=null,this._previousTime=NaN,this._previousLookAtTime=NaN,this._errorIntegral=[0,0,0];var c=1;this.Kp_pan=2.5*c,this.Ki_pan=1.5*c,this.Kd_pan=150*c,this.Kp_pitch=5*c,this.Kp_dist=2*c,this.Kp_bearing=0*c,this._follow=1*c,this._hadTerrain=!1}return n(e,[{key:"_cloneCoord",value:function(t){return new this.MercatorCoordinate(t.x,t.y,t.z)}},{key:"targetDistance",get:function(){return this._distanceTarget},set:function(t){this._distanceTarget=t}},{key:"targetPitch",get:function(){return this._pitchTarget},set:function(t){this._pitchTarget=t}},{key:"targetBearing",get:function(){return this._bearingTarget},set:function(t){this._bearingTarget=t}},{key:"targetCenter",get:function(){return this._centerTarget},set:function(t){var e=this.map.queryTerrainElevation(t)||0;this._centerTarget=this.MercatorCoordinate.fromLngLat(t,e)}},{key:"clear",value:function(){this._center=null}},{key:"setPanPID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150;this.Kp_pan=t,this.Ki_pan=e,this.Kd_pan=n}},{key:"setPitchP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.Kp_pitch=t}},{key:"setDistP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.Kp_dist=t}},{key:"setBearingP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Kp_bearing=t}},{key:"follow",get:function(){return this._follow},set:function(t){this._follow=Math.max(0,Math.min(1,t))}},{key:"tick",value:function(t){if(!this._centerTarget)throw new Error("invalid camera controller state: no target set");var e=1/this._centerTarget.meterInMercatorCoordinateUnits(),n=this.map.getFreeCameraOptions(),i=!!this.map.getTerrain();if(null===this._center){this._center=this._cloneCoord(this._centerTarget),this._previousCenter=this._cloneCoord(this._centerTarget),this._previousLookAtTime=t;var a=this._distanceTarget/e,l=this.map.queryTerrainElevation(this._centerTarget.toLngLat())||0;null!==l&&(this._centerTarget.z=l/e);var c=this._bearingTarget*Math.PI/180,f=this._pitchTarget*Math.PI/180;return n.position.x=this._center.x+Math.sin(f)*Math.sin(c)*a,n.position.y=this._center.y+Math.sin(f)*Math.cos(c)*a,n.position.z=this._center.z+Math.cos(f)*a+l/e,n.lookAtPoint(this._center.toLngLat()),this.map.setFreeCameraOptions(n),void(this._hadTerrain=i)}var p=isNaN(this._previousTime)?0:Math.min(t-this._previousTime,32)/1e3;if(this._previousTime=t,i&&!this._hadTerrain){var _=this.map.queryTerrainElevation(this._centerTarget.toLngLat());null!==_&&(this._centerTarget.z+=_/e,this._hadTerrain=i)}else!i&&this._hadTerrain&&(this._centerTarget.z=0,this._hadTerrain=i);this._center.z=this._centerTarget.z;var m=[this._centerTarget.x-this._center.x,this._centerTarget.y-this._center.y,this._centerTarget.z-this._center.z],v=h(m)*e;this._errorIntegral[0]+=m[0]*p,this._errorIntegral[1]+=m[1]*p,this._errorIntegral[2]+=m[2]*p;var g=[0,0,1],y=[this._centerTarget.x-n.position.x,this._centerTarget.y-n.position.y,this._centerTarget.z-n.position.z],b=o([],y),w=o([],s([],b,g)),k=s([],w,b),x=r(y)*e,P=1-x/this._distanceTarget,M=Math.acos(-y[2]/r(y)),T=this._pitchTarget*(Math.PI/180)-M,E=[Math.cos(this._bearingTarget*(Math.PI/180)),Math.sin(this._bearingTarget*(Math.PI/180))],L=u([],[b[0],b[1]]),S=d(E,L)*Math.sin(M),C=[-S*L[1],S*L[0]],j=this._center.x,A=this._center.y,O=this._center.z,F=this.Ki_pan,I=this.Kp_pan,z=this.Kd_pan,N=this.Kp_dist*(x/e),G=this.Kp_pitch*(x/e),D=this.Kp_bearing*(x/e);if(v*I>this._distanceTarget/1e3||Math.abs(P)*N>1e-8||Math.abs(T)*G>1e-8||h(C)*D>1e-8){var H=[0,0,0];if(this._previousCenter&&!isNaN(this._previousLookAtTime)&&t>this._previousLookAtTime){var U=t-this._previousLookAtTime;H[0]=(this._center.x-this._previousCenter.x)/U,H[1]=(this._center.y-this._previousCenter.y)/U,H[2]=(this._center.z-this._previousCenter.z)/U}var q=(m[0]*I+this._errorIntegral[0]*F+H[0]*z)*p,R=(m[1]*I+this._errorIntegral[1]*F+H[1]*z)*p,W=(m[2]*I+this._errorIntegral[2]*F+H[2]*z)*p;this._center.x+=q,this._center.y+=R,this._center.z+=W,n.position.x+=q*(1-this._follow),n.position.y+=R*(1-this._follow),n.position.z+=W*(1-this._follow),n.position.x-=k[0]*T*G*p,n.position.y-=k[1]*T*G*p,n.position.z-=k[2]*T*G*p,n.position.x+=C[0]*D*p,n.position.y+=C[1]*D*p,o(y,y),n.position.x-=y[0]*P*N*p,n.position.y-=y[1]*P*N*p,n.position.z-=y[2]*P*N*p,n.lookAtPoint(this._center.toLngLat()),this.map.setFreeCameraOptions(n)}this._previousCenter=new this.MercatorCoordinate(j,A,O),this._previousLookAtTime=t}}]),e}();return _}();var Gt=Nt.exports;function Dt(t){var e=At(t);if(2===e.length&&!Ht(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var a=n[n.length-1];e[o][0]===a[0]&&e[o][1]===a[1]||(n.push(e[o]),(i=n.length)>2&&Ut(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,Ht(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return Ut(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function Ht(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ut(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],l=e[1],u=s-o,c=l-a;return 0===(r-o)*c-(i-a)*u&&(Math.abs(u)>=Math.abs(c)?u>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=l:l<=i&&i<=a)}function qt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Rt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Rt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Bt(t);default:throw new Error("unknown GeoJSON type")}}function Rt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Wt(t.properties),e.geometry=Bt(t.geometry),e}function Wt(t){var e={};return t?(Object.keys(t).forEach((function(n){var i=t[n];"object"===r(i)?null===i?e[n]=null:Array.isArray(i)?e[n]=i.map((function(t){return t})):e[n]=Wt(i):e[n]=i})),e):e}function Bt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Bt(t)})),e):(e.coordinates=Kt(t.coordinates),e)}function Kt(t){var e=t;return"object"!==r(e[0])?e.slice():e.map((function(t){return Kt(t)}))}function Vt(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function Zt(t,e,n,r,i){for(var o,a=r,s=e+1;s<n;s++){var l=Vt(t[s],t[e],t[n]);l>a&&(o=s,a=l)}a>r&&(o-e>1&&Zt(t,e,o,r,i),i.push(t[o]),n-o>1&&Zt(t,o,n,r,i))}function $t(t,e){var n=t.length-1,r=[t[0]];return Zt(t,0,n,e,r),r.push(t[n]),r}function Jt(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r,i,o,a,s=t[0],l=[s],u=1,c=t.length;u<c;u++)n=t[u],i=s,o=void 0,a=void 0,o=(r=n).x-i.x,a=r.y-i.y,o*o+a*a>e&&(l.push(n),s=n);return s!==n&&l.push(n),l}(t,r),t=$t(t,r)}function Qt(t,e){if(!(n=e=e||{})||n.constructor!==Object)throw new Error("options is invalid");var n,i=void 0!==e.tolerance?e.tolerance:1,o=e.highQuality||!1,a=e.mutate||!1;if(!t)throw new Error("geojson is required");if(i&&i<0)throw new Error("invalid tolerance");return!0!==a&&(t=qt(t)),Lt(t,(function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;!function(t,e){void 0===e&&(e={});var n="object"===r(e)?e.mutate:e;if(!t)throw new Error("geojson is required");var i=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}(t),o=[];switch(i){case"LineString":o=Dt(t);break;case"MultiLineString":case"Polygon":At(t).forEach((function(t){o.push(Dt(t))}));break;case"MultiPolygon":At(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Dt(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};At(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(a,e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}t.coordinates?!0===n&&(t.coordinates=o):!0===n?t.geometry.coordinates=o:bt({type:i,coordinates:o},t.properties,{bbox:t.bbox,id:t.id})}(t,!0);var o=t.coordinates;switch(i){case"LineString":t.coordinates=Yt(o,e,n);break;case"MultiLineString":t.coordinates=o.map((function(t){return Yt(t,e,n)}));break;case"Polygon":t.coordinates=Xt(o,e,n);break;case"MultiPolygon":t.coordinates=o.map((function(t){return Xt(t,e,n)}))}}(t,i,o)})),t}function Yt(t,e,n){return Jt(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function Xt(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=Jt(r,e,n).map((function(t){return[t.x,t.y]}));!te(i);)i=Jt(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function te(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var ee={type:"FeatureCollection",features:[]},ne=function(t){return 5280*t/1609},re=function(){function t(e){a(this,t),this.geojson=e,this.simplified=Qt(e,{tolerance:1e-4,highQuality:!0}),this.elevationProfiles=[],this.bboxes={all:Ct(e),foot:Ct(xt(e.features.filter((function(t){return"foot"===t.properties.mode}))))},this.computeElevationProfile(),this._lengthCache=[]}return l(t,[{key:"computeElevationProfile",value:function(){for(var t=0;t<this.geojson.features.length;t++){var e=this.geojson.features[t];if("foot"===e.properties.mode){for(var n=e.geometry.coordinates,r=[{distance:0,elevation:ne(n[0][2])}],i=0,o=1;o<n.length;o++)i+=Ft(kt([n[o-1],n[o]]),{units:"kilometers"}),r.push({distance:i,elevation:ne(n[o][2])});for(var a=r.map((function(t){return t.elevation})),s=a.slice(),l=0;l<10;l++){for(var u=1;u<a.length-1;u++)s[u]=.5*(a[u-1]+a[u+1]);var c=[s,a];a=c[0],s=c[1]}for(var h=1;h<a.length-1;h++)r[h].elevation=a[h];this.elevationProfiles[t]=r}}}},{key:"getFootFeatureIndex",value:function(){for(var t=0;t<this.geojson.features.length;t++)if("foot"===this.geojson.features[t].properties.mode)return t;return-1}},{key:"getElevationProfile",value:function(){var t=this.getFootFeatureIndex();return this.elevationProfiles[t]}},{key:"featureLength",value:function(t){return void 0===this._lengthCache[t]&&(this._lengthCache[t]=Ft(this.geojson.features[t].geometry)),this._lengthCache[t]}},{key:"getBbox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mode,n=void 0===e?"all":e;return this.bboxes[n]}},{key:"getGeojson",value:function(){return this.geojson}},{key:"evaluate",value:function(t){var e=Math.min(Math.floor(t),this.geojson.features.length-1),n=t-e,r=this.geojson.features[e],i=function(t,e,n){void 0===n&&(n={});for(var r,i=("Feature"===(r=t).type?r.geometry:r).coordinates,o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++){if(o>=e){var s=e-o;if(s){var l=It(i[a],i[a-1])-180;return zt(i[a],s,l,n)}return wt(i[a])}o+=Ot(i[a],i[a+1],n)}return wt(i[i.length-1])}(r.geometry,this.featureLength(e)*n,{units:"kilometers"});return[i.geometry.coordinates,r]}},{key:"getMileMarkers",value:function(){if(!this.geojson)return ee;var t,e=[],n=_(this.geojson.features);try{for(n.s();!(t=n.n()).done;){var r,i,o,a=t.value;e.push.apply(e,f((null===(r=a.properties)||void 0===r||null===(i=r.markers)||void 0===i||null===(o=i.mi)||void 0===o?void 0:o.features)||[]))}}catch(t){n.e(t)}finally{n.f()}return xt(e)}}]),t}();"undefined"!=typeof window&&void 0!==window.mapboxgl&&(mapboxgl.accessToken="pk.eyJ1IjoicnNyZXVzc2VyIiwiYSI6ImNtN2FwejhlbjA2cWgybW9zZHNzOGM2ZGgifQ.E6cjL2Vy-dwktWX2e9NjQw");var ie=["natural-line-label","natural-point-label","water-line-label","water-point-label","poi-label","transit-label","settlement-subdivision-label","settlement-minor-label","settlement-major-label","state-label","country-label"],oe={type:"FeatureCollection",features:[]},ae=wt([0,0]),se=function(){function t(e,n,r,i){var o=this;a(this,t),this.map=window.map=new mapboxgl.Map({container:e,style:"mapbox://styles/rsreusser/ckt5f72080l7r18quyld7h4si",scrollZoom:!1,boxZoom:!1,dragRotate:!1,dragPan:!1,keyboard:!1,doubleClickZoom:!1,touchZoomRotate:!1,interactive:!1,pitch:0,bounds:n,logoPosition:"top-right",fitBoundsOptions:{padding:r}}),window.innerWidth>600&&map.addControl(new mapboxgl.ScaleControl({unit:"imperial"}),"bottom-right"),this.camera=window.camera=new Gt(this.map),this.map.on("load",(function(){map.loadImage("pin.png",(function(t,e){if(t)throw t;map.addImage("pin",e),o.map.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14});var n=localStorage.getItem("hillshadeResolution"),r=!!n;r&&o.map.addSource("mapbox-dem-2",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:n,maxzoom:14}),o.map.getSource("mapbox://mapbox.satellite").maxzoom=15,o.map.addLayer({id:"hillshade",source:r?"mapbox-dem-2":"mapbox-dem",type:"hillshade",paint:{"hillshade-exaggeration":1,"hillshade-highlight-color":"rgba(255,230,210,0.3)","hillshade-shadow-color":"rgba(0,10,20,1)","hillshade-illumination-anchor":"map","hillshade-illumination-direction":180}},"ferry"),o.map.addSource("homedot",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[-122.27206065046302,37.80294946708875],type:"Point"}}]}}),o.map.addSource("route",{type:"geojson",data:oe}),o.map.addSource("mile-markers",{type:"geojson",data:oe}),o.map.addSource("marker-point",{type:"geojson",data:ae});var a="track casing";o.map.addLayer({id:"routeline-bg",source:"route",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","mode"],"bus"],"#592556",["==",["get","mode"],"metro"],"#23388f",["==",["get","mode"],"foot"],"#1c381b","black"],"line-width":7}},a),o.map.addLayer({id:"routeline-nonfoot",source:"route",type:"line",filter:["!=",["get","mode"],"foot"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","mode"],"bus"],"#ba45b6",["==",["get","mode"],"metro"],"#3388ff",["==",["get","mode"],"foot"],"#5cb83b","black"],"line-width":4}},a),o.map.addLayer({id:"routeline-foot",source:"route",type:"line",filter:["==",["get","mode"],"foot"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","mode"],"bus"],"#ba45b6",["==",["get","mode"],"metro"],"#3388ff",["==",["get","mode"],"foot"],"#5cb83b","black"],"line-width":4}},a),o.map.addLayer({id:"homedot",source:"homedot",type:"circle",paint:{"circle-opacity":1,"circle-color":"white","circle-pitch-alignment":"map","circle-radius":3,"circle-stroke-width":1.5,"circle-stroke-color":"#3388ff"}},a),o.map.addLayer({id:"marker",source:"marker-point",type:"circle",paint:{"circle-opacity":1,"circle-color":"white","circle-pitch-alignment":"map","circle-radius":7,"circle-stroke-width":3,"circle-stroke-color":"#5cb83b"}},a),o.map.addLayer({id:"mile-markers",source:"mile-markers",type:"symbol",layout:{"icon-image":"pin","icon-offset":[0,-22],"icon-size":.4,"icon-text-fit":"width","icon-text-fit-padding":[0,28,0,28],"text-field":"{distance}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,-1.2]},paint:{"text-opacity":0,"icon-opacity":0,"text-color":"white","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":.75,"text-halo-blur":.5}},a),i&&i()}))}))}return l(t,[{key:"setMarkerColor",value:function(t){this.map.setPaintProperty("marker","circle-stroke-color",t)}},{key:"setMileMarkerOpacity",value:function(t){this.map.setPaintProperty("mile-markers","text-opacity",t),this.map.setPaintProperty("mile-markers","icon-opacity",t)}},{key:"setMileMarkers",value:function(t){this.map.getSource("mile-markers").setData(t||oe)}},{key:"setGlobalPadding",value:function(t){this.map.easeTo({padding:t,duration:0})}},{key:"setRouteData",value:function(t){this.map.getSource("route").setData(t||oe)}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"setMarkerPosition",value:function(t){if(map.getLayer("marker")){var e=map.getSource("marker-point");e&&(t||this.map.setPaintProperty("marker","circle-opacity",0),this.map.setPaintProperty("marker","circle-opacity",1),e.setData(t?wt(t):oe))}}},{key:"setTerrain",value:function(t,e){var n=this.map.getTerrain();t||e?n?t!==n.exaggeration&&this.map.setTerrain({source:"mapbox-dem",exaggeration:t,"exaggeration-transition":{duration:1e3}}):this.map.setTerrain({source:"mapbox-dem",exaggeration:t}):n&&this.map.setTerrain(null)}},{key:"setSimplifiedMode",value:function(t){this.map.setLayoutProperty("mile-markers","visibility",t?"none":"visible");var e,n=_(ie);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.map.setPaintProperty(r,"text-opacity",t?0:1),this.map.setPaintProperty(r,"icon-opacity",t?0:1)}}catch(t){n.e(t)}finally{n.f()}}}]),t}(),le=function(){function t(e){a(this,t),this.onframe=e,this.raf=null,this.tPrev=null}return l(t,[{key:"start",value:function(){var t=this;this.raf=requestAnimationFrame((function e(n){var r=null===t.tPrev?0:n-t.tPrev;t.tPrev=n,t.onframe(n,r),t.raf=requestAnimationFrame(e)}))}},{key:"stop",value:function(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null,this.tPrev=null)}}]),t}();function ue(t,e,n){return n*e+(1-n)*t}var ce,he,fe,de,pe,_e=function(){function t(e){a(this,t),this.tol=1e-10,this.value=null,this.target=null,this.time=null,this.timescale=e,this.changedc=!1}return l(t,[{key:"setTarget",value:function(t){this.target=t,this.changed=!0,null===this.value&&(this.value=this.target)}},{key:"tick",value:function(t){var e=this.value,n=Math.exp(-t*Math.LN2/this.timescale);this.value=ue(this.target,this.value,n),this.changed=Math.abs(e-this.value)>this.tol}},{key:"getValue",value:function(){if(null===this.value)throw new Error("invalid read of uninitialized smoother");return[this.value,this.changed]}},{key:"clear",value:function(){this.value=null,this.target=null,this.time=null,this.changed=!0}}]),t}(),me=function(t){return t/1.609},ve=function(){function t(){var e=this;a(this,t);var n=document.createElement("div");n.setAttribute("id","elevation-plot"),document.body.appendChild(n);var r=this.marker=document.createElement("div");r.classList.add("elevation-marker"),n.appendChild(r),this.margin={top:5,right:15,bottom:17,left:40},this.svg=d3.select(n).append("svg"),this.container=this.svg.append("g"),this.container.append("g").attr("class","x-axis axis"),this.container.append("g").attr("class","y-axis axis"),this.container.append("g").attr("class","grid x-grid"),this.container.append("g").attr("class","grid y-grid"),this.container.append("path").attr("class","elevation-fill"),this.container.append("path").attr("class","elevation"),this.container.append("text").text("↑ feet").attr("class","elev-label"),this.container.append("text").text("mile →").attr("class","dist-label"),this.data=null,window.addEventListener("resize",(function(){return e.draw()}))}return l(t,[{key:"getIndex",value:function(t){if(!this.data)return-1;for(var e,n=0,r=this.data.length-1;n<=r;){if(e=Math.floor((n+r)/2),this.data[e].distance===t)return e;this.data[e].distance<t?n=e+1:r=e-1}return e}},{key:"setProgress",value:function(t){if(this.data&&this.x&&this.y){arguments.length&&(this._progress=t);var e=this.data[this.data.length-1].distance,n=this.getIndex(e*this._progress),r=this.data[n].elevation;window.elplot=this;var i=this.x(me(e*this._progress))+this.margin.left,o=this.y(r)+this.margin.top;this.marker.style.transform="translate(".concat(i,"px,").concat(o,"px)")}}},{key:"draw",value:function(){if(this.data){this.width=Math.min(520-this.margin.left-this.margin.right,Math.max(Math.min(window.innerWidth,540),window.innerWidth-520-this.margin.left-this.margin.right)),this.width=Math.min(this.width,window.innerWidth-this.margin.left-this.margin.right),this.height=window.innerWidth<=640?60:100,this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.container.attr("transform","translate("+this.margin.left+","+this.margin.top+")");var t=this.x=d3.scaleLinear().domain([0,me(this.data[this.data.length-1].distance)]).range([0,this.width]),n=this.y=d3.scaleLinear().domain([this.minElevation,this.maxElevation]).range([this.height,0]),r=d3.axisBottom(t).ticks(10),i=d3.axisLeft(n).ticks(5);this.container.select(".x-axis").attr("transform","translate(0,"+this.height+")").call(r),this.container.select(".y-axis").call(i),this.container.select(".elev-label").attr("transform","translate(2,0)").style("font-size",12).style("font-family","sans-serif").style("alignment-baseline","hanging"),this.container.select(".dist-label").attr("transform","translate(".concat(this.width,",0)")).style("font-size",12).style("font-family","sans-serif").style("text-anchor","end").style("alignment-baseline","hanging");var o=i.tickSize(-this.width).tickFormat("");this.container.select(".y-grid").call(o),this.container.select(".elevation").datum(this.data).attr("fill","none").attr("stroke","#5cb83b").attr("stroke-width",3).attr("d",d3.line().x((function(e){return me(t(e.distance))})).y((function(t){return n(t.elevation)})));var a=this.data.slice(),s=e({},a[a.length-1]),l=e({},a[0]);s.elevation=n.invert(this.height),l.elevation=n.invert(this.height),a.push(s,l),this.container.select(".elevation-fill").datum(a).attr("fill","#31814126").attr("stroke","none").attr("d",d3.line().x((function(e){return me(t(e.distance))})).y((function(t){return n(t.elevation)})))}}},{key:"setProfile",value:function(t){if(t&&(this.data=t),t){for(var e=1/0,n=-1/0,r=0;r<this.data.length;r++)e=Math.min(e,this.data[r].elevation),n=Math.max(n,this.data[r].elevation);var i=.5*(n-e);e-=.1*i,n+=.1*i,this.minElevation=e,this.maxElevation=n,this.draw()}}}]),t}(),ge={bus:"#ba45b6",foot:"#5cb83b",metro:"#3388ff"},ye=function(){function t(){a(this,t),"undefined"!=typeof window&&(window.pageController=this),this.map=null,this._onload=[],this.loaded=!1,this.route=null,this.followProgress=new _e(150),this.dirty=!1,this.needsPaddingUpdate=!0,this.featureMode=null,this.followTimer=new le(this.step.bind(this))}return l(t,[{key:"initializeMap",value:function(t,e,n){var r=this;this.elevationPlot=new ve,this.map=new se(t,e,this.computeGlobalPadding(),(function(){for(r.loaded=!0;r._onload.length;)r._onload.pop()(r.map)}))}},{key:"ready",value:function(){var t=this;return this.loaded?Promise.resolve(this.map):new Promise((function(e){t._onload.push(e)}))}},{key:"setRoute",value:function(t,e,n){var r=this;this.dirty=!0,this.route=new re(t),this.ready().then((function(){r.map.setRouteData(r.route.getGeojson()),r.map.setMileMarkers(r.route.getMileMarkers()),r.map.map.fitBounds(r.route.getBbox({mode:"foot"}),{duration:n?0:2e3}),r.elevationPlot.setProfile(r.route.getElevationProfile())}))}},{key:"clearRoute",value:function(){var t=this;this.route=null,this.followProgress.clear(),this.map.setMileMarkers(null),this.ready().then((function(){t.map.setRouteData(null)}))}},{key:"stop",value:function(){this.followTimer.stop()}},{key:"step",value:function(t,e){this.followProgress.tick(e);var n=h(this.followProgress.getValue(),2),r=n[0];if((n[1]||this.dirty)&&(this.dirty=!1,"follow"===this.mode))this.route&&(this.applyFollowProgress(r,this.followProgress.target),this.map.camera.tick(t))}},{key:"setFeatureMode",value:function(t){if(t||document.body.removeAttribute("data-feature-mode"),t!==this.featureMode){if(this.map.setMarkerColor(ge[t||"metro"]),t&&document.body.setAttribute("data-feature-mode",t),"foot"===t)this.map.setMileMarkerOpacity(1);else this.map.setMileMarkerOpacity(0);this.featureMode=t}}},{key:"applyFollowProgress",value:function(t,e,n){if(this.route){var r=h(this.route.evaluate(e),1)[0],i=h(this.route.evaluate(t),2),o=i[0],a=i[1];this.applyGlobalPadding(),this.map.setTerrain("foot"===a.properties.mode?1.3:0,!0),this.map.camera.targetCenter=r,this.map.camera.targetPitch=40,this.setFeatureMode(a.properties.mode),"foot"===a.properties.mode?this.map.camera.targetDistance=4500:"bus"===a.properties.mode?this.map.camera.targetDistance=11e3:this.map.camera.targetDistance=16e3,this.map.setMarkerPosition(o),"foot"===a.properties.mode&&this.elevationPlot.setProgress(t%1)}}},{key:"computeGlobalPadding",value:function(){var t={top:60,right:60,bottom:60,left:60};return!this.mode||"bound"===this.mode?t.bottom=.3*window.innerHeight+60:t.left=Math.max(60,Math.min(580,window.innerWidth-520)),t}},{key:"applyGlobalPadding",value:function(){this.needsPaddingUpdate&&(this.needsPaddingUpdate=!1,this.map.setGlobalPadding(this.computeGlobalPadding()))}},{key:"setProgress",value:function(t,e){var n=this,r=t!==this.mode;switch(this.mode=t,r&&(this.needsPaddingUpdate=!0),this.mode){case"bound":this.setFeatureMode(null),this.applyGlobalPadding(),this.map.setTerrain(null),this.map.camera.clear(),this.followProgress.clear(),r&&(this.followTimer.stop(),this.map.setMarkerPosition(null),this.route&&(this.map.map.fitBounds(this.route.getBbox({mode:"foot"}),{duration:1e3}),this.map.map.once("idle",(function(){return n.map.map.easeTo({pitch:0})}))));break;case"follow":r&&this.followTimer.start(),this.followProgress.setTarget(e);break;default:throw new Error("invalid route mode: ".concat(t))}}},{key:"setSimplifiedMode",value:function(t){this.map.setSimplifiedMode(t)}}]),t}(),be=function(t,e){var n={__c:e="__cC"+k++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(F)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}(new ye);function we(t){var e=ht(be),n=ct(null);return ut((function(){e.initializeMap(n.current,t.initialBounds)}),[]),X(ce||(ce=c(["<div ref=",' class="mbxmap"/>'])),n)}var ke,xe,Pe,Me="https://mathstodon.xyz";function Te(t){return Ee.apply(this,arguments)}function Ee(){return(Ee=o(n().mark((function t(e){var r,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(Me,"/api/v1/statuses/").concat(e,"/context"),t.next=3,fetch(r);case 3:if((i=t.sent).ok){t.next=6;break}throw new Error("Response status: ".concat(i.status));case 6:return t.next=8,i.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Le(t){var e=t.postId,r=h(lt(null),2),i=r[0],a=r[1],s=h(lt(null),2),l=s[0],u=s[1];return ut(o(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Te(e);case 3:r=t.sent,a(r.descendants),u(null),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),u("Unable to load comments");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),[]),l?X(he||(he=c(['\n      <div class="comments_loading">',"</div>\n    "])),l):null===i?X(fe||(fe=c(['\n      <div class="comments_loading">\n        <div class="spinner threebody">\n          <div class="threebody-o"><div/><div/><div/></div>\n        </div>\n        <div>Loading comments...</div>\n      </div>']))):X(de||(de=c(['\n      <div class="comments">\n        <div class="comments_meta">\n          <div class="comments_count">'," ",'</div>\n          <a href="',"/@rreusser/",'">Reply on Mastodon →</a>\n        </div>\n        ',"\n      </div>\n    "])),i.length,1===i.length?"Comment":"Comments",Me,e,i.map((function(t){return X(pe||(pe=c(['\n          <a class="comment" href="',"/@","/",'">\n            <div class="comment_meta">\n              <a href=',' class="comment_user">\n                <img src=','/>\n                <div>\n                  <div class="comment_displayname">','</div>\n                  <div class="comment_commenter">','</div>\n                </div>\n              </div\n              </a>\n              <a class="comment_ago" href="',"/@","/",'">\n                '," ago\n              </a>\n            </div>\n            <div key=",' class="comment_content" dangerouslySetInnerHTML=',"/>\n          </a>\n        "])),Me,t.account.acct,t.id,t.account.url,t.account.avatar_static,t.account.display_name,t.account.acct,Me,t.account.acct,t.id,(e=new Date(t.created_at),n=Math.floor((new Date-e)/1e3),(r=n/31536e3)>1?Math.floor(r)+" years":(r=n/2592e3)>1?Math.floor(r)+" months":(r=n/86400)>1?Math.floor(r)+" days":(r=n/3600)>1?Math.floor(r)+" hours":(r=n/60)>1?Math.floor(r)+" minutes":Math.floor(n)+" seconds"),t.id,{__html:t.content});var e,n,r})))}var Se,Ce=/^http/,je=!0,Ae=["","introduction/"];function Oe(t){var e=t.page,r=t.setPath,i=ct(null),a=ct(null),s=ht(be),l=""===e.metadata.path,u=e.metadata.isFront;function h(t){var e="A"===t.target.tagName?t.target:t.target.closest("a");if(e){var n=e.getAttribute("href");Ce.test(n)||(n.endsWith("/")||(n+="/"),"/"===n&&(n=""),t.stopPropagation(),t.preventDefault(),r(n))}}return ut(o(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.ready();case 2:s.setSimplifiedMode(-1!==Ae.indexOf(e.metadata.path)),(r=e.metadata.routeurl)?fetch(r).then((function(t){if(!t.ok)throw new Error("failed to load route");return t.json()})).then((function(t){s.setRoute(t,e.metadata.bounds,je),window.dispatchEvent(new CustomEvent("scroll")),je=!1})):(s.clearRoute(je?null:e.metadata.bounds),je=!1);case 5:case"end":return t.stop()}}),t)}))),[]),ut((function(){if(i.current){i.current.addEventListener("click",h);var t=i.current.querySelectorAll("[data-route-mode]"),e=function(t){return n()};return window.addEventListener("scroll",n),window.addEventListener("resize",e),e(),function(){i.current.removeEventListener("click",h),window.removeEventListener("scroll",n),window.removeEventListener("resize",e)}}function n(e){var n,r,i=.15*window.innerHeight,o=[],a=_(t);try{for(a.s();!(n=a.n()).done;){var l=n.value;o.push(l.getBoundingClientRect().y-i)}}catch(t){a.e(t)}finally{a.f()}for(r=0;r<o.length&&o[r]<0;r++);r=Math.max(r-1,0);var u=t[Math.max(0,r)],c=t[Math.min(r+1,t.length-1)],h=Math.max(0,Math.min(1,-o[r]/(o[r+1]-o[r]))),f=u?parseFloat(u.getAttribute("data-route-progress")):0,d=c?parseFloat(c.getAttribute("data-route-progress")):f;isNaN(d)&&(d=f);var p=ue(f,d,h),m=u?u.getAttribute("data-route-mode"):"bound";s.setProgress(m,p)}}),[]),ut((function(){a.current&&a.current.addEventListener("click",(function(t){t.stopPropagation()}))})),X(ke||(ke=c([' <div\n    class="articleContainer '," ",'"\n    ref=','\n  >\n    <div class="articleHeader">\n      ',"\n      <h1>",'</h1>\n      <div class="article_date">','</div>\n    </div>\n    <div class="articleBody">\n      ',"\n      <div\n        ref=","\n        dangerouslySetInnerHTML=","\n      />\n    </div>\n    ","\n  </div>"])),u?"is-front":"",l?"is-home":"",a,l?"":X(xe||(xe=c(['<a href="" onClick=',">← Back</a>"])),(function(t){return h(t)})),e.metadata.title,e.metadata.date,"",i,{__html:e.articleHTML},e.metadata.mastodonId?X(Pe||(Pe=c(['\n          <div class="articleContent comments">\n            <'," postId="," />\n          </div>\n        "])),Le,e.metadata.mastodonId):"")}var Fe=new Map;!function(t,e,n){var r,i,o;v.__&&v.__(t,e),i=(r="function"==typeof n)?null:n&&n.__k||e.__k,o=[],R(e,t=(!r&&n||e).__k=L(C,null,[t]),i||x,x,void 0!==e.ownerSVGElement,!r&&n?[n]:i?null:e.firstChild?m.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r),W(o,t)}(L((function(t){var e=h(lt(t.page.metadata.path),2),n=e[0],r=e[1],i=h(lt(t.page),2),o=i[0],a=i[1],s=h(lt(!1),2),l=s[0],u=s[1],f=ht(be);return ut((function(){var t=new URLSearchParams(window.location.search).toString(),e=t?"".concat(o.baseURL).concat(n,"?").concat(t).replace(/\/\//g,"/"):"".concat(o.baseURL).concat(n).replace(/\/\//g,"/");history.pushState({page:o,path:n},"",e),window.addEventListener("popstate",(function(t){r(t.state.path),a(t.state.page),f.stop()}))}),[]),ut((function(){var t=(n||"").replace(/\?.*$/,"");if(t!==o.metadata.path&&!l){var e=new URLSearchParams(window.location.search),r=window.manifest[t],i=e.toString()?"".concat(n,"?").concat(e.toString()):n;u(!0),history.pushState({dstPath:i,page:null},"",i),function(t){return Fe.has(t)?Promise.resolve(Fe.get(t)):fetch(t).then((function(t){if(!t.ok)throw new Error("404d!");return t.json()})).then((function(e){return Fe.set(t,e),e}))}(r).then((function(t){a(t),history.replaceState({dstPath:i,page:t},"",i),document.querySelector("title").textContent=["Trains and Trails"===t.metadata.title?"":t.metadata.title,"Trains and Trails"].filter((function(t){return!!t})).join(" - ")})).then((function(){return u(!1)}),(function(){return u(!1)}))}})),X(Se||(Se=c(["\n    <","\n      initialBounds=","\n      isHome=",'\n    />\n    <div class="left-spacer" />\n    <',"\n      key=","\n      page=","\n      setPath=",'\n    />\n    <div class="right-spacer" />\n  '])),we,o.metadata.bounds,"/"===o.metadata.path,Oe,o.metadata.path||"/",o,(function(){r.apply(void 0,arguments),window.scrollTo(0,0)}))}),{page:window.page}),document.getElementById("root"))}));
//# sourceMappingURL=bundle.js.map
