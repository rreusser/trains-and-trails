!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new P(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h={};function f(){}function p(){}function d(){}var _={};u(_,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(M([])));m&&m!==n&&r.call(m,i)&&(_=m);var g=d.prototype=f.prototype=Object.create(_);function y(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(o,i,a,s){var u=c(t[o],t,i);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=d,u(g,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},y(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),u(g,s,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function s(t){n(a,o,i,s,u,"next",t)}function u(t){n(a,o,i,s,u,"throw",t)}s(void 0)}))}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h,f,p,d,_,v,m,g={},y=[],w=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function b(t,e){for(var n in e)t[n]=e[n];return t}function k(t){var e=t.parentNode;e&&e.removeChild(t)}function x(t,e,n){var r,o,i,a={};for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?h.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return P(t,a,r,o,null)}function P(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++p:o};return null==o&&null!=f.vnode&&f.vnode(i),i}function M(t){return t.children}function L(t,e){this.props=t,this.context=e}function E(t,e){if(null==e)return t.__?E(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?E(t):null}function S(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return S(t)}}function A(t){(!t.__d&&(t.__d=!0)&&d.push(t)&&!C.__r++||v!==f.debounceRendering)&&((v=f.debounceRendering)||_)(C)}function C(){for(var t;C.__r=d.length;)t=d.sort((function(t,e){return t.__v.__b-e.__v.__b})),d=[],t.some((function(t){var e,n,r,o,i,a;t.__d&&(i=(o=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=b({},o)).__v=o.__v+1,I(a,o,r,e.__n,void 0!==a.ownerSVGElement,null!=o.__h?[i]:null,n,null==i?E(o):i,o.__h),H(n,o),o.__e!=i&&S(o)))}))}function T(t,e,n,r,o,i,a,s,u,l){var c,h,f,p,d,_,v,m=r&&r.__k||y,w=m.length;for(n.__k=[],c=0;c<e.length;c++)if(null!=(p=n.__k[c]=null==(p=e[c])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?P(null,p,null,null,p):Array.isArray(p)?P(M,{children:p},null,null,null):p.__b>0?P(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(f=m[c])||f&&p.key==f.key&&p.type===f.type)m[c]=void 0;else for(h=0;h<w;h++){if((f=m[h])&&p.key==f.key&&p.type===f.type){m[h]=void 0;break}f=null}I(t,p,f=f||g,o,i,a,s,u,l),d=p.__e,(h=p.ref)&&f.ref!=h&&(v||(v=[]),f.ref&&v.push(f.ref,null,p),v.push(h,p.__c||d,p)),null!=d?(null==_&&(_=d),"function"==typeof p.type&&p.__k===f.__k?p.__d=u=j(p,u,t):u=F(t,p,f,m,d,u),"function"==typeof n.type&&(n.__d=u)):u&&f.__e==u&&u.parentNode!=t&&(u=E(f))}for(n.__e=_,c=w;c--;)null!=m[c]&&("function"==typeof n.type&&null!=m[c].__e&&m[c].__e==n.__d&&(n.__d=E(r,c+1)),B(m[c],m[c]));if(v)for(c=0;c<v.length;c++)D(v[c],v[++c],v[++c])}function j(t,e,n){for(var r,o=t.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=t,e="function"==typeof r.type?j(r,e,n):F(n,r,r,o,r.__e,e));return e}function F(t,e,n,r,o,i){var a,s,u;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==n||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),a=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<r.length;u+=2)if(s==o)break t;t.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function N(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||w.test(e)?n:n+"px"}function O(t,e,n,r,o){var i;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||N(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||N(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r||t.addEventListener(e,i?z:G,i):t.removeEventListener(e,i?z:G,i);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function G(t){this.l[t.type+!1](f.event?f.event(t):t)}function z(t){this.l[t.type+!0](f.event?f.event(t):t)}function I(t,e,n,r,o,i,a,s,u){var l,c,p,d,_,v,m,y,w,x,P,S=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(u=n.__h,s=e.__e=n.__e,e.__h=null,i=[s]),(l=f.__b)&&l(e);try{t:if("function"==typeof S){if(y=e.props,w=(l=S.contextType)&&r[l.__c],x=l?w?w.props.value:l.__:r,n.__c?m=(c=e.__c=n.__c).__=c.__E:("prototype"in S&&S.prototype.render?e.__c=c=new S(y,x):(e.__c=c=new L(y,x),c.constructor=S,c.render=U),w&&w.sub(c),c.props=y,c.state||(c.state={}),c.context=x,c.__n=r,p=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=S.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=b({},c.__s)),b(c.__s,S.getDerivedStateFromProps(y,c.__s))),d=c.props,_=c.state,p)null==S.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==S.getDerivedStateFromProps&&y!==d&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(y,x),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(y,c.__s,x)||e.__v===n.__v){c.props=y,c.state=c.__s,e.__v!==n.__v&&(c.__d=!1),c.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),c.__h.length&&a.push(c);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(y,c.__s,x),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(d,_,v)}))}c.context=x,c.props=y,c.state=c.__s,(l=f.__r)&&l(e),c.__d=!1,c.__v=e,c.__P=t,l=c.render(c.props,c.state,c.context),c.state=c.__s,null!=c.getChildContext&&(r=b(b({},r),c.getChildContext())),p||null==c.getSnapshotBeforeUpdate||(v=c.getSnapshotBeforeUpdate(d,_)),P=null!=l&&l.type===M&&null==l.key?l.props.children:l,T(t,Array.isArray(P)?P:[P],e,n,r,o,i,a,s,u),c.base=e.__e,e.__h=null,c.__h.length&&a.push(c),m&&(c.__E=c.__=null),c.__e=!1}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(t,e,n,r,o,i,a,s){var u,l,c,f=n.props,p=e.props,d=e.type,_=0;if("svg"===d&&(o=!0),null!=i)for(;_<i.length;_++)if((u=i[_])&&"setAttribute"in u==!!d&&(d?u.localName===d:3===u.nodeType)){t=u,i[_]=null;break}if(null==t){if(null===d)return document.createTextNode(p);t=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),i=null,s=!1}if(null===d)f===p||s&&t.data===p||(t.data=p);else{if(i=i&&h.call(t.childNodes),l=(f=n.props||g).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,!s){if(null!=i)for(f={},_=0;_<t.attributes.length;_++)f[t.attributes[_].name]=t.attributes[_].value;(c||l)&&(c&&(l&&c.__html==l.__html||c.__html===t.innerHTML)||(t.innerHTML=c&&c.__html||""))}if(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||O(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||O(t,i,e[i],n[i],r)}(t,p,f,o,s),c)e.__k=[];else if(_=e.props.children,T(t,Array.isArray(_)?_:[_],e,n,r,o&&"foreignObject"!==d,i,a,i?i[0]:n.__k&&E(n,0),s),null!=i)for(_=i.length;_--;)null!=i[_]&&k(i[_]);s||("value"in p&&void 0!==(_=p.value)&&(_!==t.value||"progress"===d&&!_||"option"===d&&_!==f.value)&&O(t,"value",_,f.value,!1),"checked"in p&&void 0!==(_=p.checked)&&_!==t.checked&&O(t,"checked",_,f.checked,!1))}return t}(n.__e,e,n,r,o,i,a,u);(l=f.diffed)&&l(e)}catch(t){e.__v=null,(u||null!=i)&&(e.__e=s,e.__h=!!u,i[i.indexOf(s)]=null),f.__e(t,e,n)}}function H(t,e){f.__c&&f.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){f.__e(t,e.__v)}}))}function D(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){f.__e(t,n)}}function B(t,e,n){var r,o;if(f.unmount&&f.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||D(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){f.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&B(r[o],e,"function"!=typeof t.type);n||null==t.__e||k(t.__e),t.__e=t.__d=void 0}function U(t,e,n){return this.constructor(t,n)}h=y.slice,f={__e:function(t,e,n,r){for(var o,i,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(t)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,r||{}),a=o.__d),a)return o.__E=o}catch(e){t=e}throw t}},p=0,L.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=b({},this.state),"function"==typeof t&&(t=t(b({},n),this.props)),t&&b(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),A(this))},L.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),A(this))},L.prototype.render=M,d=[],_="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,C.__r=0,m=0;var K=function t(e,n,r,o){var i;n[0]=0;for(var a=1;a<n.length;a++){var s=n[a++],u=n[a]?(n[0]|=s?1:2,r[n[a++]]):n[++a];3===s?o[0]=u:4===s?o[1]=Object.assign(o[1]||{},u):5===s?(o[1]=o[1]||{})[n[++a]]=u:6===s?o[1][n[++a]]+=u+"":s?(i=e.apply(u,t(e,u,r,["",null])),o.push(i),u[0]?n[0]|=2:(n[a-2]=0,n[a]=i)):o.push(u)}return o},q=new Map;var R,W,J,Z=function(t){var e=q.get(this);return e||(e=new Map,q.set(this,e)),(e=K(this,e.get(t)||(e.set(t,e=function(t){for(var e,n,r=1,o="",i="",a=[0],s=function(t){1===r&&(t||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,t,o):3===r&&(t||o)?(a.push(3,t,o),r=2):2===r&&"..."===o&&t?a.push(4,t,0):2===r&&o&&!t?a.push(5,0,!0,o):r>=5&&((o||!t&&5===r)&&(a.push(r,0,o,n),r=6),t&&(a.push(r,t,0,n),r=6)),o=""},u=0;u<t.length;u++){u&&(1===r&&s(),s(u));for(var l=0;l<t[u].length;l++)e=t[u][l],1===r?"<"===e?(s(),a=[a],r=3):o+=e:4===r?"--"===o&&">"===e?(r=1,o=""):o=e+o[0]:i?e===i?i="":o+=e:'"'===e||"'"===e?i=e:">"===e?(s(),r=1):r&&("="===e?(r=5,n=o,o=""):"/"===e&&(r<5||">"===t[u][l+1])?(s(),3===r&&(a=a[0]),r=a,(a=a[0]).push(2,0,r),r=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(s(),r=2):o+=e),3===r&&"!--"===o&&(r=4,a=a[0])}return s(),a}(t)),e),arguments,[])).length>1?e:e[0]}.bind(x),$=0,V=[],Y=f.__b,X=f.__r,Q=f.diffed,tt=f.__c,et=f.unmount;function nt(t,e){f.__h&&f.__h(W,t,$||e),$=0;var n=W.__H||(W.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function rt(t){return $=1,function(t,e,n){var r=nt(R++,2);return r.t=t,r.__c||(r.__=[n?n(e):ft(void 0,e),function(t){var e=r.t(r.__[0],t);r.__[0]!==e&&(r.__=[e,r.__[1]],r.__c.setState({}))}],r.__c=W),r.__}(ft,t)}function ot(t,e){var n=nt(R++,3);!f.__s&&ht(n.__H,e)&&(n.__=t,n.__H=e,W.__H.__h.push(n))}function it(t){return $=5,function(t,e){var n=nt(R++,7);return ht(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}((function(){return{current:t}}),[])}function at(t){var e=W.context[t.__c],n=nt(R++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(W)),e.props.value):t.__}function st(){for(var t;t=V.shift();)if(t.__P)try{t.__H.__h.forEach(lt),t.__H.__h.forEach(ct),t.__H.__h=[]}catch(e){t.__H.__h=[],f.__e(e,t.__v)}}f.__b=function(t){W=null,Y&&Y(t)},f.__r=function(t){X&&X(t),R=0;var e=(W=t.__c).__H;e&&(e.__h.forEach(lt),e.__h.forEach(ct),e.__h=[])},f.diffed=function(t){Q&&Q(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==V.push(e)&&J===f.requestAnimationFrame||((J=f.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),ut&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);ut&&(e=requestAnimationFrame(n))})(st)),W=null},f.__c=function(t,e){e.some((function(t){try{t.__h.forEach(lt),t.__h=t.__h.filter((function(t){return!t.__||ct(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],f.__e(n,t.__v)}})),tt&&tt(t,e)},f.unmount=function(t){et&&et(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{lt(t)}catch(t){e=t}})),e&&f.__e(e,n.__v))};var ut="function"==typeof requestAnimationFrame;function lt(t){var e=W,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),W=e}function ct(t){var e=W;t.__c=t.__(),W=e}function ht(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function ft(t,e){return"function"==typeof e?e(t):e}var pt=6371008.8,dt={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*pt,kilometers:6371.0088,kilometres:6371.0088,meters:pt,metres:pt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:pt/1852,radians:1,yards:6967335.223679999};function _t(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function vt(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!bt(t[0])||!bt(t[1]))throw new Error("coordinates must contain numbers");return _t({type:"Point",coordinates:t},e,n)}function mt(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return _t({type:"LineString",coordinates:t},e,n)}function gt(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function yt(t){return 180*(t%(2*Math.PI))/Math.PI}function wt(t){return t%360*Math.PI/180}function bt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function kt(t,e,n){if(null!==t)for(var r,o,i,a,s,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,_="Feature"===p,v=d?t.features.length:1,m=0;m<v;m++){s=(c=!!(l=d?t.features[m].geometry:_?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var g=0;g<s;g++){var y=0,w=0;if(null!==(a=c?l.geometries[g]:l)){u=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,m,y,w))return!1;f++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,m,y,w))return!1;f++,"MultiPoint"===b&&y++}"LineString"===b&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-h;o++){if(!1===e(u[r][o],f,m,y,w))return!1;f++}"MultiLineString"===b&&y++,"Polygon"===b&&w++}"Polygon"===b&&y++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(w=0,o=0;o<u[r].length;o++){for(i=0;i<u[r][o].length-h;i++){if(!1===e(u[r][o][i],f,m,y,w))return!1;f++}w++}y++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===kt(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function xt(t,e){var n,r,o,i,a,s,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,_=p?t.features.length:1;for(n=0;n<_;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===e(i.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function Pt(t,e){!function(t,e){xt(t,(function(t,n,r,o,i){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(_t(t,r,{bbox:o,id:i}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u];if(!1===e(_t({type:a,coordinates:l},r),n,u))return!1}}))}(t,(function(t,n,r){var o=0;if(t.geometry){var i=t.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var a,s=0,u=0,l=0;return!1!==kt(t,(function(i,c,h,f,p){if(void 0===a||n>s||f>u||p>l)return a=i,s=n,u=f,l=p,void(o=0);var d=mt([a,i],t.properties);if(!1===e(d,n,r,p,o))return!1;o++,a=i}))&&void 0}}}))}function Mt(t){var e=[1/0,1/0,-1/0,-1/0];return kt(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Lt(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Et(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function St(t,e,n){void 0===n&&(n={});var r=Lt(t),o=Lt(e),i=wt(o[1]-r[1]),a=wt(o[0]-r[0]),s=wt(r[1]),u=wt(o[1]),l=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return function(t,e){void 0===e&&(e="kilometers");var n=dt[e];if(!n)throw new Error(e+" units is invalid");return t*n}(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function At(t,e){return void 0===e&&(e={}),function(t,e,n){var r=n,o=!1;return Pt(t,(function(t,i,a,s,u){r=!1===o&&void 0===n?t:e(r,t,i,a,s,u),o=!0})),r}(t,(function(t,n){var r=n.geometry.coordinates;return t+St(r[0],r[1],e)}),0)}function Ct(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=Ct(e,t);return n=(n+180)%360}(t,e);var r=Lt(t),o=Lt(e),i=wt(r[0]),a=wt(o[0]),s=wt(r[1]),u=wt(o[1]),l=Math.sin(a-i)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-i);return yt(Math.atan2(l,c))}function Tt(t,e,n,r){void 0===r&&(r={});var o=Lt(t),i=wt(o[0]),a=wt(o[1]),s=wt(n),u=function(t,e){void 0===e&&(e="kilometers");var n=dt[e];if(!n)throw new Error(e+" units is invalid");return t/n}(e,r.units),l=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s));return vt([yt(i+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(l))),yt(l)],r.properties)}function jt(t,e,n){void 0===n&&(n={});for(var r,o=("Feature"===(r=t).type?r.geometry:r).coordinates,i=0,a=0;a<o.length&&!(e>=i&&a===o.length-1);a++){if(i>=e){var s=e-i;if(s){var u=Ct(o[a],o[a-1])-180;return Tt(o[a],s,u,n)}return vt(o[a])}i+=St(o[a],o[a+1],n)}return vt(o[o.length-1])}Mt.default=Mt;var Ft=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)};var Nt=function(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i);return t};var Ot=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2];return t[0]=o*u-i*s,t[1]=i*a-r*u,t[2]=r*s-o*a,t};var Gt=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t};var zt=function(t,e){return t[0]*e[0]+t[1]*e[1]};var It=function(){function t(e){o(this,t),this.map=e,this.raf=null,this.currentLookAt=mapboxgl.MercatorCoordinate.fromLngLat(e.transform.center),this.previousLookAt=this.currentLookAt,this.previousLookAtTime=NaN,this.targetLookAt=this.currentLookAt,this.targetDistance=1e5,this.targetPitch=5,this.targetBearing=0,this.targetCenter=this.center=mapboxgl.MercatorCoordinate.fromLngLat(e.transform.center),this.targetCenter=null,this.dirty=!0,this.previousTime=NaN,this.accumError=[0,0,0],this.Kp_pan=2.5,this.Ki_pan=1.5,this.Kd_pan=150,this.Kp_pitch=5,this.Kp_dist=1,this.Kp_bearing=0,this.followStrength=1}return a(t,[{key:"setTargetDistance",value:function(t){this.targetDistance=t}},{key:"setTargetPitch",value:function(t){this.targetPitch=t}},{key:"setTargetBearing",value:function(t){this.targetBearing=t}},{key:"setTargetCenter",value:function(t){this.targetCenter=mapboxgl.MercatorCoordinate.fromLngLat(t)}},{key:"isClear",value:function(){return null===this.targetCenter}},{key:"clear",value:function(){this.targetCenter=null}},{key:"setKi",value:function(t){this.Ki=t}},{key:"setPanPID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.Kp_pan=t,this.Ki_pan=e,this.Kd_pan=n}},{key:"setPitchP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.Kp_pitch=t}},{key:"setDistP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.Kp_dist=t}},{key:"setBearingP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.Kp_bearing=t}},{key:"setFollowStrength",value:function(t){this.followStrength=t}},{key:"fitBounds",value:function(t){var e=.5*((t=t.flat())[2]+t[0]),n=.5*(t[3]+t[1]),r=.5*(t[2]-t[0]),o=.5*(t[3]-t[1]),i=St(vt([e,n]),vt([e-r,n]),{units:"meters"}),a=St(vt([e,n]),vt([e,n-o]),{units:"meters"}),s=Math.tan(this.map.transform.fov*Math.PI/180),u=2*a/s,l=2*i/s/(window.innerWidth/window.innerHeight);this.targetDistance=1.5*Math.max(u,l),this.setTargetBearing(0),this.setTargetPitch(5),this.setTargetCenter([e,n])}},{key:"tick",value:function(t){if(this.isClear())throw new Error("invalid camera controller state: no target set");var e=isNaN(this.previousTime)?0:Math.min(t/1e3-this.previousTime,.032);this.previousTime=t/1e3;var n=this.map.getFreeCameraOptions(),r=new mapboxgl.MercatorCoordinate(this.currentLookAt.x,this.currentLookAt.y,this.currentLookAt.z),o=this.targetCenter,i=n.position,a=1/o.meterInMercatorCoordinateUnits(),s=[o.x-r.x,o.y-r.y,o.z-r.z],u=Ft(s)*a;this.accumError[0]+=s[0]*e,this.accumError[1]+=s[1]*e,this.accumError[2]+=s[2]*e;var l=[o.x-i.x,o.y-i.y,o.z-i.z],c=Nt([],l),h=Nt([],Ot([],c,[0,0,1])),f=Ot([],h,c),p=Ft(l)*a,d=1-p/this.targetDistance,_=Math.acos(-l[2]/Ft(l)),v=this.targetPitch*(Math.PI/180)-_,m=[Math.cos(this.targetBearing*(Math.PI/180)),Math.sin(this.targetBearing*(Math.PI/180))],g=Gt([],[c[0],c[1]]),y=zt(m,g)*Math.sin(_),w=[-y*g[1],y*g[0]],b=r.x,k=r.y,x=r.z;if(u>.001||Math.abs(d)>1e-5||Math.abs(v)>1e-5||Math.abs(y)>1e-6){var P=this.Kp_dist*(p/a),M=this.Kp_pitch*(p/a),L=this.Kp_bearing*(p/a),E=this.Ki_pan,S=this.Kp_pan,A=this.Kd_pan,C=[0,0,0];if(!isNaN(this.previousLookAtTime)&&t>this.previousLookAtTime){var T=t-this.previousLookAtTime;C[0]=(r.x-this.previousLookAt.x)/T,C[1]=(r.y-this.previousLookAt.y)/T,C[2]=(r.z-this.previousLookAt.z)/T}var j=this.accumError,F=(s[0]*S+j[0]*E+C[0]*A)*e,N=(s[1]*S+j[1]*E+C[1]*A)*e,O=(s[2]*S+j[2]*E+C[2]*A)*e;r.x+=F,r.y+=N,r.z+=O,i.x+=F*(1-this.followStrength),i.y+=N*(1-this.followStrength),i.z+=O*(1-this.followStrength),i.x-=f[0]*v*M*e,i.y-=f[1]*v*M*e,i.z-=f[2]*v*M*e,i.x+=w[0]*L*e,i.y+=w[1]*L*e,Nt(l,l),i.x-=l[0]*d*P*e,i.y-=l[1]*d*P*e,i.z-=l[2]*d*P*e,this.currentLookAt=r,n.lookAtPoint(this.currentLookAt.toLngLat()),this.map.setFreeCameraOptions(n)}(isNaN(this.previousLookAtTime)||t>this.previousLookAtTime)&&(this.previousLookAt=new mapboxgl.MercatorCoordinate(b,k,x),this.previousLookAtTime=t)}}]),t}();function Ht(t){var e=Et(t);if(2===e.length&&!Dt(e[0],e[1]))return e;var n=[],r=e.length-1,o=n.length;n.push(e[0]);for(var i=1;i<r;i++){var a=n[n.length-1];e[i][0]===a[0]&&e[i][1]===a[1]||(n.push(e[i]),(o=n.length)>2&&Bt(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),o=n.length,Dt(e[0],e[e.length-1])&&o<4)throw new Error("invalid polygon");return Bt(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1),n}function Dt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Bt(t,e,n){var r=n[0],o=n[1],i=t[0],a=t[1],s=e[0],u=e[1],l=s-i,c=u-a;return 0===(r-i)*c-(o-a)*l&&(Math.abs(l)>=Math.abs(c)?l>0?i<=r&&r<=s:s<=r&&r<=i:c>0?a<=o&&o<=u:u<=o&&o<=a)}function Ut(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Kt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Kt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Rt(t);default:throw new Error("unknown GeoJSON type")}}function Kt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=qt(t.properties),e.geometry=Rt(t.geometry),e}function qt(t){var n={};return t?(Object.keys(t).forEach((function(r){var o=t[r];"object"===e(o)?null===o?n[r]=null:Array.isArray(o)?n[r]=o.map((function(t){return t})):n[r]=qt(o):n[r]=o})),n):n}function Rt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Rt(t)})),e):(e.coordinates=Wt(t.coordinates),e)}function Wt(t){var n=t;return"object"!==e(n[0])?n.slice():n.map((function(t){return Wt(t)}))}function Jt(t,e,n){var r=e.x,o=e.y,i=n.x-r,a=n.y-o;if(0!==i||0!==a){var s=((t.x-r)*i+(t.y-o)*a)/(i*i+a*a);s>1?(r=n.x,o=n.y):s>0&&(r+=i*s,o+=a*s)}return(i=t.x-r)*i+(a=t.y-o)*a}function Zt(t,e,n,r,o){for(var i,a=r,s=e+1;s<n;s++){var u=Jt(t[s],t[e],t[n]);u>a&&(i=s,a=u)}a>r&&(i-e>1&&Zt(t,e,i,r,o),o.push(t[i]),n-i>1&&Zt(t,i,n,r,o))}function $t(t,e){var n=t.length-1,r=[t[0]];return Zt(t,0,n,e,r),r.push(t[n]),r}function Vt(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r,o,i,a,s=t[0],u=[s],l=1,c=t.length;l<c;l++)n=t[l],o=s,i=void 0,a=void 0,i=(r=n).x-o.x,a=r.y-o.y,i*i+a*a>e&&(u.push(n),s=n);return s!==n&&u.push(n),u}(t,r),t=$t(t,r)}function Yt(t,n){if(!(r=n=n||{})||r.constructor!==Object)throw new Error("options is invalid");var r,o=void 0!==n.tolerance?n.tolerance:1,i=n.highQuality||!1,a=n.mutate||!1;if(!t)throw new Error("geojson is required");if(o&&o<0)throw new Error("invalid tolerance");return!0!==a&&(t=Ut(t)),xt(t,(function(t){!function(t,n,r){var o=t.type;if("Point"===o||"MultiPoint"===o)return t;!function(t,n){void 0===n&&(n={});var r="object"===e(n)?n.mutate:n;if(!t)throw new Error("geojson is required");var o=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}(t),i=[];switch(o){case"LineString":i=Ht(t);break;case"MultiLineString":case"Polygon":Et(t).forEach((function(t){i.push(Ht(t))}));break;case"MultiPolygon":Et(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Ht(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};Et(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(a,e)||(i.push(t),a[e]=!0)}));break;default:throw new Error(o+" geometry not supported")}t.coordinates?!0===r&&(t.coordinates=i):!0===r?t.geometry.coordinates=i:_t({type:o,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}(t,!0);var i=t.coordinates;switch(o){case"LineString":t.coordinates=Xt(i,n,r);break;case"MultiLineString":t.coordinates=i.map((function(t){return Xt(t,n,r)}));break;case"Polygon":t.coordinates=Qt(i,n,r);break;case"MultiPolygon":t.coordinates=i.map((function(t){return Qt(t,n,r)}))}}(t,o,i)})),t}function Xt(t,e,n){return Vt(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function Qt(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var o=Vt(r,e,n).map((function(t){return[t.x,t.y]}));!te(o);)o=Vt(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return o[o.length-1][0]===o[0][0]&&o[o.length-1][1]===o[0][1]||o.push(o[0]),o}))}function te(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var ee={type:"FeatureCollection",features:[]},ne=function(t){return 5280*t/1609},re=function(){function t(e){o(this,t),this.geojson=e,this.simplified=Yt(e,{tolerance:1e-4,highQuality:!0}),this.elevationProfiles=[],this.bboxes={all:Mt(e),foot:Mt(gt(e.features.filter((function(t){return"foot"===t.properties.mode}))))},this.computeElevationProfile(),this._lengthCache=[]}return a(t,[{key:"computeElevationProfile",value:function(){for(var t=0;t<this.geojson.features.length;t++){var e=this.geojson.features[t];if("foot"===e.properties.mode){for(var n=e.geometry.coordinates,r=[{distance:0,elevation:ne(n[0][2])}],o=0,i=1;i<n.length;i++)o+=At(mt([n[i-1],n[i]]),{units:"kilometers"}),r.push({distance:o,elevation:ne(n[i][2])});for(var a=r.map((function(t){return t.elevation})),s=a.slice(),u=0;u<10;u++){for(var l=1;l<a.length-1;l++)s[l]=.5*(a[l-1]+a[l+1]);var c=[s,a];a=c[0],s=c[1]}for(var h=1;h<a.length-1;h++)r[h].elevation=a[h];this.elevationProfiles[t]=r}}}},{key:"getFootFeatureIndex",value:function(){for(var t=0;t<this.geojson.features.length;t++)if("foot"===this.geojson.features[t].properties.mode)return t;return-1}},{key:"getElevationProfile",value:function(){var t=this.getFootFeatureIndex();return this.elevationProfiles[t]}},{key:"featureLength",value:function(t){return void 0===this._lengthCache[t]&&(this._lengthCache[t]=At(this.geojson.features[t].geometry)),this._lengthCache[t]}},{key:"getBbox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mode,n=void 0===e?"all":e;return this.bboxes[n]}},{key:"getGeojson",value:function(){return this.geojson}},{key:"evaluate",value:function(t){var e=Math.min(Math.floor(t),this.geojson.features.length-1),n=t-e,r=this.geojson.features[e];return[jt(r.geometry,this.featureLength(e)*n,{units:"kilometers"}).geometry.coordinates,r]}},{key:"getMileMarkers",value:function(){if(!this.geojson)return ee;for(var t=0;t<this.geojson.features.length&&"foot"!==this.geojson.features[t].properties.mode;t++);for(var e=this.featureLength(t)/1.609,n=this.geojson.features[t],r=[],o=1;o<e;o++){var i=jt(n.geometry,o,{units:"miles"});i.properties={mile:o},r.push(i)}return gt(r)}}]),t}();"undefined"!=typeof window&&void 0!==window.mapboxgl&&(mapboxgl.accessToken="pk.eyJ1IjoicnJldXNzZXIiLCJhIjoiY2tsNzNnN2xwMXJ3bTJxcWplaHptZmtmNiJ9.4jyhYK5B3nCMw2NTD761hg");var oe={type:"FeatureCollection",features:[]},ie=vt([0,0]),ae=function(){function t(e,n,r,i){var a=this;o(this,t),this.map=window.map=new mapboxgl.Map({container:e,style:"mapbox://styles/rreusser/cl3jof9o3000g14le3tzu1ih9/draft",scrollZoom:!1,boxZoom:!1,dragRotate:!1,dragPan:!1,keyboard:!1,doubleClickZoom:!1,touchZoomRotate:!1,interactive:!1,pitch:0,bounds:n,fitBoundsOptions:{padding:r}}),this.camera=window.camera=new It(this.map),this.map.on("load",(function(){map.loadImage("pin.png",(function(t,e){if(t)throw t;map.addImage("pin",e),a.map.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),a.map.addSource("route",{type:"geojson",data:oe}),a.map.addSource("mile-markers",{type:"geojson",data:oe}),a.map.addSource("marker-point",{type:"geojson",data:ie}),a.map.addLayer({id:"routeline",source:"route",type:"line",paint:{"line-color":["case",["==",["get","mode"],"metro"],"#3388ff",["==",["get","mode"],"foot"],"#5cb83b","black"],"line-width":4}}),a.map.addLayer({id:"marker",source:"marker-point",type:"circle",paint:{"circle-opacity":1,"circle-color":"red","circle-pitch-alignment":"map","circle-radius":8}}),a.map.addLayer({id:"mile-markers",source:"mile-markers",type:"symbol",layout:{"icon-image":"pin","icon-offset":[0,-22],"icon-size":.4,"icon-text-fit":"width","icon-text-fit-padding":[0,28,0,28],"text-field":"{mile}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,-1.2]},paint:{"text-color":"white","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":.75,"text-halo-blur":.5}}),i&&i()}))}))}return a(t,[{key:"setMileMarkers",value:function(t){this.map.getSource("mile-markers").setData(t||oe)}},{key:"setGlobalPadding",value:function(t){this.map.easeTo({padding:t,duration:0})}},{key:"setRouteData",value:function(t){this.map.getSource("route").setData(t||oe)}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"setMarkerPosition",value:function(t){if(map.getLayer("marker")){var e=map.getSource("marker-point");e&&(t||this.map.setPaintProperty("marker","circle-opacity",0),this.map.setPaintProperty("marker","circle-opacity",1),e.setData(t?vt(t):oe))}}},{key:"setTerrain",value:function(t,e){var n=this.map.getTerrain();t||e?n?t!==n.exaggeration&&this.map.setTerrain({source:"mapbox-dem",exaggeration:t,"exaggeration-transition":{duration:1e3}}):this.map.setTerrain({source:"mapbox-dem",exaggeration:t}):n&&this.map.setTerrain(null)}}]),t}(),se=function(){function t(e){o(this,t),this.onframe=e,this.raf=null,this.tPrev=null}return a(t,[{key:"start",value:function(){var t=this;this.raf=requestAnimationFrame((function e(n){var r=null===t.tPrev?0:n-t.tPrev;t.tPrev=n,t.onframe(n,r),t.raf=requestAnimationFrame(e)}))}},{key:"stop",value:function(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null,this.tPrev=null)}}]),t}();function ue(t,e,n){return n*e+(1-n)*t}var le,ce,he,fe=function(){function t(e){o(this,t),this.tol=1e-10,this.value=null,this.target=null,this.time=null,this.timescale=e,this.changedc=!1}return a(t,[{key:"setTarget",value:function(t){this.target=t,this.changed=!0,null===this.value&&(this.value=this.target)}},{key:"tick",value:function(t){var e=this.value,n=Math.exp(-t*Math.LN2/this.timescale);this.value=ue(this.target,this.value,n),this.changed=Math.abs(e-this.value)>this.tol}},{key:"getValue",value:function(){if(null===this.value)throw new Error("invalid read of uninitialized smoother");return[this.value,this.changed]}},{key:"clear",value:function(){this.value=null,this.target=null,this.time=null,this.changed=!0}}]),t}(),pe=function(t){return t/1.609},de=function(){function t(){var e=this;o(this,t);var n=document.createElement("div");n.setAttribute("id","elevation-plot"),document.body.appendChild(n);var r=this.marker=document.createElement("div");r.classList.add("elevation-marker"),n.appendChild(r),this.margin={top:15,right:15,bottom:20,left:40},this.svg=d3.select(n).append("svg"),this.container=this.svg.append("g"),this.container.append("g").attr("class","x-axis axis"),this.container.append("g").attr("class","y-axis axis"),this.container.append("g").attr("class","grid x-grid"),this.container.append("g").attr("class","grid y-grid"),this.container.append("path").attr("class","elevation"),this.data=null,window.addEventListener("resize",(function(){return e.draw()}))}return a(t,[{key:"getIndex",value:function(t){if(!this.data)return-1;for(var e,n=0,r=this.data.length-1;n<=r;){if(e=Math.floor((n+r)/2),this.data[e].distance===t)return e;this.data[e].distance<t?n=e+1:r=e-1}return e}},{key:"setProgress",value:function(t){if(this.data&&this.x&&this.y){arguments.length&&(this._progress=t);var e=this.data[this.data.length-1].distance,n=this.getIndex(e*this._progress),r=this.data[n].elevation;window.elplot=this;var o=this.x(pe(e*this._progress))+this.margin.left,i=this.y(r)+this.margin.top;this.marker.style.transform="translate(".concat(o,"px,").concat(i,"px)")}}},{key:"draw",value:function(){this.width=Math.min(520-this.margin.left-this.margin.right,Math.max(Math.min(window.innerWidth,540),window.innerWidth-520-this.margin.left-this.margin.right)),this.height=100,this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.container.attr("transform","translate("+this.margin.left+","+this.margin.top+")");var t=this.x=d3.scaleLinear().domain([0,pe(this.data[this.data.length-1].distance)]).range([0,this.width]),e=this.y=d3.scaleLinear().domain([this.minElevation,this.maxElevation]).range([this.height,0]),n=d3.axisBottom(t).ticks(10),r=d3.axisLeft(e).ticks(5);this.container.select(".x-axis").attr("transform","translate(0,"+this.height+")").call(n),this.container.select(".y-axis").call(r);var o=n.tickSize(-this.height).tickFormat(""),i=r.tickSize(-this.width).tickFormat("");this.container.select(".x-grid").attr("transform","translate(0,"+this.height+")").call(o),this.container.select(".y-grid").call(i),this.container.select(".elevation").datum(this.data).attr("fill","none").attr("stroke","#5cb83b").attr("stroke-width",3).attr("d",d3.line().x((function(e){return pe(t(e.distance))})).y((function(t){return e(t.elevation)})))}},{key:"setProfile",value:function(t){if(t&&(this.data=t),t){for(var e=1/0,n=-1/0,r=0;r<this.data.length;r++)e=Math.min(e,this.data[r].elevation),n=Math.max(n,this.data[r].elevation);var o=.5*(n-e);e-=.1*o,n+=.1*o,this.minElevation=e,this.maxElevation=n,this.draw()}}}]),t}(),_e=function(){function t(){o(this,t),"undefined"!=typeof window&&(window.pageController=this),this.map=null,this._onload=[],this.loaded=!1,this.route=null,this.followProgress=new fe(150),this.dirty=!1,this.needsPaddingUpdate=!0,this.featureMode=null,this.followTimer=new se(this.step.bind(this))}return a(t,[{key:"initializeMap",value:function(t,e,n){var r=this;this.elevationPlot=new de,this.map=new ae(t,e,this.computeGlobalPadding(),(function(){for(r.loaded=!0;r._onload.length;)r._onload.pop()(r.map)}))}},{key:"ready",value:function(){var t=this;return this.loaded?Promise.resolve(this.map):new Promise((function(e){t._onload.push(e)}))}},{key:"setRoute",value:function(t,e,n){var r=this;this.dirty=!0,this.route=new re(t),this.ready().then((function(){r.map.setRouteData(r.route.getGeojson()),r.map.setMileMarkers(r.route.getMileMarkers()),r.map.map.fitBounds(r.route.getBbox({mode:"foot"}),{duration:n?0:2e3}),r.elevationPlot.setProfile(r.route.getElevationProfile())}))}},{key:"clearRoute",value:function(){var t=this;this.route=null,this.followProgress.clear(),this.map.setMileMarkers(null),this.ready().then((function(){t.map.setRouteData(null)}))}},{key:"stop",value:function(){this.followTimer.stop()}},{key:"step",value:function(t,e){this.followProgress.tick(e);var n=u(this.followProgress.getValue(),2),r=n[0];if((n[1]||this.dirty)&&(this.dirty=!1,"follow"===this.mode))this.route&&(this.applyFollowProgress(r,this.followProgress.target),this.map.camera.tick(t))}},{key:"setFeatureMode",value:function(t){if(t!==this.featureMode)if("foot"===t)document.body.setAttribute("data-feature-mode","foot");else document.body.removeAttribute("data-feature-mode")}},{key:"applyFollowProgress",value:function(t,e,n){if(this.route){var r=u(this.route.evaluate(e),1)[0],o=u(this.route.evaluate(t),2),i=o[0],a=o[1];this.applyGlobalPadding(),this.map.setTerrain("foot"===a.properties.mode?1.3:0,!0),this.map.camera.setTargetCenter(r),this.map.camera.setTargetPitch(40),this.setFeatureMode(a.properties.mode),"foot"===a.properties.mode?this.map.camera.setTargetDistance(5e3):this.map.camera.setTargetDistance(1e4),this.map.setMarkerPosition(i),"foot"===a.properties.mode&&this.elevationPlot.setProgress(t%1)}}},{key:"computeGlobalPadding",value:function(){var t={top:60,right:60,bottom:60,left:60};return!this.mode||"bound"===this.mode?t.bottom=.3*window.innerHeight+60:t.left=Math.max(60,Math.min(580,window.innerWidth-520)),t}},{key:"applyGlobalPadding",value:function(){this.needsPaddingUpdate&&(this.needsPaddingUpdate=!1,this.map.setGlobalPadding(this.computeGlobalPadding()))}},{key:"setProgress",value:function(t,e){var n=this,r=t!==this.mode;switch(this.mode=t,r&&(this.needsPaddingUpdate=!0),this.mode){case"bound":this.setFeatureMode(null),this.applyGlobalPadding(),this.map.setTerrain(null),this.map.camera.clear(),this.followProgress.clear(),r&&(this.followTimer.stop(),this.map.setMarkerPosition(null),this.route&&(this.map.map.fitBounds(this.route.getBbox({mode:"foot"}),{duration:1e3}),this.map.map.once("idle",(function(){return n.map.map.easeTo({pitch:0})}))));break;case"follow":r&&this.followTimer.start(),this.followProgress.setTarget(e);break;default:throw new Error("invalid route mode: ".concat(t))}}}]),t}(),ve=function(t,e){var n={__c:e="__cC"+m++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(A)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}(new _e);function me(t){var e=at(ve),n=it(null);return ot((function(){e.initializeMap(n.current,t.initialBounds)}),[]),Z(le||(le=s(["<div ref=",' class="mbxmap"/>'])),n)}var ge,ye=/^http/,we=!0;function be(e){var n=e.page,o=e.setPath,i=it(null),a=at(ve),u=""===n.metadata.path,c=n.metadata.isFront;function h(t){if("A"===t.target.tagName){var e=t.target.getAttribute("href");ye.test(e)||(e.endsWith("/")||(e+="/"),"/"===e&&(e=""),t.stopPropagation(),t.preventDefault(),o(e))}}return ot(r(t().mark((function e(){var r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.ready();case 2:(r=n.metadata.routeurl)?fetch(r).then((function(t){if(!t.ok)throw new Error("failed to load route");return t.json()})).then((function(t){a.setRoute(t,n.metadata.bounds,we),window.dispatchEvent(new CustomEvent("scroll")),we=!1})):(a.clearRoute(we?null:n.metadata.bounds),we=!1);case 4:case"end":return t.stop()}}),e)}))),[]),ot((function(){if(i.current){i.current.addEventListener("click",h);var t=i.current.querySelectorAll("[data-route-mode]"),e=function(t){return n()};return window.addEventListener("scroll",n),window.addEventListener("resize",e),e(),function(){i.current.removeEventListener("click",h),window.removeEventListener("scroll",n),window.removeEventListener("resize",e)}}function n(e){var n,r,o=1*window.innerHeight/4,i=[],s=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;i.push(u.getBoundingClientRect().y-o)}}catch(t){s.e(t)}finally{s.f()}for(r=0;r<i.length&&i[r]<0;r++);r=Math.max(r-1,0);var c=t[Math.max(0,r)],h=t[Math.min(r+1,t.length-1)],f=Math.max(0,Math.min(1,-i[r]/(i[r+1]-i[r]))),p=c?parseFloat(c.getAttribute("data-route-progress")):0,d=h?parseFloat(h.getAttribute("data-route-progress")):p;isNaN(d)&&(d=p);var _=ue(p,d,f),v=c?c.getAttribute("data-route-mode"):"bound";a.setProgress(v,_)}}),[]),Z(ce||(ce=s(['\n    <div class="articleContainer ','">\n      <div class="articleHeader">\n        ',"\n        <h1>",'</h1>\n        <div class="article_date">','</div>\n      </div>\n      <div class="articleBody">\n        ',"\n        <div ref="," dangerouslySetInnerHTML=","/>\n      </div>\n    </div>"])),c?"is-front":"",u?"":Z(he||(he=s(['<a href="" onClick=',">← Back</a>"])),(function(t){return h(t)})),n.metadata.title,n.metadata.date,"",i,{__html:n.articleHTML})}var ke=new Map;!function(t,e,n){var r,o,i;f.__&&f.__(t,e),o=(r="function"==typeof n)?null:n&&n.__k||e.__k,i=[],I(e,t=(!r&&n||e).__k=x(M,null,[t]),o||g,g,void 0!==e.ownerSVGElement,!r&&n?[n]:o?null:e.firstChild?h.call(e.childNodes):null,i,!r&&n?n:o?o.__e:e.firstChild,r),H(i,t)}(x((function(t){var e=u(rt(t.page.metadata.path),2),n=e[0],r=e[1],o=u(rt(t.page),2),i=o[0],a=o[1],l=u(rt(!1),2),c=l[0],h=l[1],f=at(ve);return ot((function(){var t="".concat(i.baseURL).concat(n).replace(/\/\//g,"/");history.pushState({page:i,path:n},"",t),window.addEventListener("popstate",(function(t){r(t.state.path),a(t.state.page),f.stop()}))}),[]),ot((function(){if(n!==i.metadata.path&&!c){var t="".concat(i.baseURL).concat(n).replace(/\/\//g,"/"),e=window.manifest[t];h(!0),history.pushState({path:t,page:null},"",t),function(t){return ke.has(t)?Promise.resolve(ke.get(t)):fetch(t).then((function(t){if(!t.ok)throw new Error("404d!");return t.json()})).then((function(e){return ke.set(t,e),e}))}(e).then((function(e){console.log("got page",e),a(e),history.replaceState({path:n,page:e},"",t)})).then((function(){return h(!1)}),(function(){return h(!1)}))}})),Z(ge||(ge=s(["\n    <"," initialBounds="," isHome=",'/>\n    <div class="left-spacer"/>\n    <'," key="," page="," setPath=",'/>\n    <div class="right-spacer"/>\n  '])),me,i.metadata.bounds,"/"===i.metadata.path,be,i.metadata.path||"/",i,(function(){r.apply(void 0,arguments),window.scrollTo(0,0)}))}),{page:window.page}),document.getElementById("root"))}));
//# sourceMappingURL=bundle.js.map
